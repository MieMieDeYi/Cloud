import Ie from"./YIcon.481673e0.js";import{d as le,i as R,k as Be,p as O,x as K,L as I,q as ce,K as Le,s as be,F as E,v as B,t as Ee,Q as we,bh as ke,w as Oe,z as Me,V as oe,c3 as $e,P as qe,a9 as V,aJ as X,E as je,S as Ge,G as He,A as Y,B as Ve,bX as ye,N as Xe,c4 as Ye,g as D,bo as $,f as S,a as M,e as Re,U as De,o as w,a0 as Je,$ as We,bV as Ae,bC as L,h as T,R as me,c2 as ge,bw as Se,W as z,a7 as Pe,c5 as Ke,u as Ze,c as xe,b as j,X as Fe,_ as Qe}from"./index.6d4055d0.js";import{u as et,m as tt}from"./Explore.5bdeed77.js";import{_ as it}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as rt}from"./Progress.56f19535.js";import{u as st}from"./use-merged-state.0840fd6e.js";import{C as nt}from"./ChevronRight.fd0d3a5a.js";const ot=le({name:"ChevronLeft",render(){return R("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),at=i=>{const{fontWeight:d,textColor1:c,textColor2:t,textColorDisabled:m,dividerColor:a,fontSize:u}=i;return{titleFontSize:u,titleFontWeight:d,dividerColor:a,titleTextColor:c,titleTextColorDisabled:m,fontSize:u,textColor:t,arrowColor:t,arrowColorDisabled:m,itemMargin:"16px 0 0 0"}},lt={name:"Collapse",common:Be,self:at},ut=lt,dt=O("collapse","width: 100%;",[O("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[K("disabled",[I("header","cursor: not-allowed;",[I("header-main",`
 color: var(--n-title-text-color-disabled);
 `),O("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),O("collapse-item","margin-left: 32px;"),ce("&:first-child","margin-top: 0;"),ce("&:first-child >",[I("header","padding-top: 0;")]),K("left-arrow-placement",[I("header",[O("collapse-item-arrow","margin-right: 4px;")])]),K("right-arrow-placement",[I("header",[O("collapse-item-arrow","margin-left: 4px;")])]),I("content-wrapper",[I("content-inner","padding-top: 16px;"),Le({duration:"0.15s"})]),K("active",[I("header",[K("active",[O("collapse-item-arrow","transform: rotate(90deg);")])])]),ce("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),I("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: 16px 0 0 0;
 color: var(--n-title-text-color);
 cursor: pointer;
 `,[I("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),I("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),O("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),pt=Object.assign(Object.assign({},Ee.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),Ne=Me("n-collapse"),ct=le({name:"Collapse",props:pt,setup(i,{slots:d}){const{mergedClsPrefixRef:c,inlineThemeDisabled:t,mergedRtlRef:m}=be(i),a=E(i.defaultExpandedNames),u=B(()=>i.expandedNames),e=st(u,a),n=Ee("Collapse","-collapse",dt,ut,i,c);function l(p){const{"onUpdate:expandedNames":f,onUpdateExpandedNames:g,onExpandedNamesChange:y}=i;g&&oe(g,p),f&&oe(f,p),y&&oe(y,p),a.value=p}function o(p){const{onItemHeaderClick:f}=i;f&&oe(f,p)}function r(p,f,g){const{accordion:y}=i,{value:v}=e;if(y)p?(l([f]),o({name:f,expanded:!0,event:g})):(l([]),o({name:f,expanded:!1,event:g}));else if(!Array.isArray(v))l([f]),o({name:f,expanded:!0,event:g});else{const F=v.slice(),b=F.findIndex(k=>f===k);~b?(F.splice(b,1),l(F),o({name:f,expanded:!1,event:g})):(F.push(f),l(F),o({name:f,expanded:!0,event:g}))}}we(Ne,{props:i,mergedClsPrefixRef:c,expandedNamesRef:e,slots:d,toggleItem:r});const h=ke("Collapse",m,c),_=B(()=>{const{common:{cubicBezierEaseInOut:p},self:{titleFontWeight:f,dividerColor:g,titleTextColor:y,titleTextColorDisabled:v,textColor:F,arrowColor:b,fontSize:k,titleFontSize:A,arrowColorDisabled:P,itemMargin:U}}=n.value;return{"--n-font-size":k,"--n-bezier":p,"--n-text-color":F,"--n-divider-color":g,"--n-title-font-size":A,"--n-title-text-color":y,"--n-title-text-color-disabled":v,"--n-title-font-weight":f,"--n-arrow-color":b,"--n-arrow-color-disabled":P,"--n-item-margin":U}}),s=t?Oe("collapse",void 0,_,i):void 0;return{rtlEnabled:h,mergedTheme:n,mergedClsPrefix:c,cssVars:t?void 0:_,themeClass:s==null?void 0:s.themeClass,onRender:s==null?void 0:s.onRender}},render(){var i;return(i=this.onRender)===null||i===void 0||i.call(this),R("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),ht=le({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(i){return{onceTrue:$e(qe(i,"show"))}},render(){return R(je,null,{default:()=>{const{show:i,displayDirective:d,onceTrue:c,clsPrefix:t}=this,m=d==="show"&&c,a=R("div",{class:`${t}-collapse-item__content-wrapper`},R("div",{class:`${t}-collapse-item__content-inner`},this.$slots));return m?V(a,[[X,i]]):i?a:null}})}}),ft={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},mt=le({name:"CollapseItem",props:ft,setup(i){const{mergedRtlRef:d}=be(i),c=Ge(),t=He(()=>{var r;return(r=i.name)!==null&&r!==void 0?r:c}),m=Y(Ne);m||Ve("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:a,props:u,mergedClsPrefixRef:e,slots:n}=m,l=B(()=>{const{value:r}=a;if(Array.isArray(r)){const{value:h}=t;return!~r.findIndex(_=>_===h)}else if(r){const{value:h}=t;return h!==r}return!0});return{rtlEnabled:ke("Collapse",d,e),collapseSlots:n,randomName:c,mergedClsPrefix:e,collapsed:l,mergedDisplayDirective:B(()=>{const{displayDirective:r}=i;return r||u.displayDirective}),arrowPlacement:B(()=>u.arrowPlacement),handleClick(r){m&&!i.disabled&&m.toggleItem(l.value,t.value,r)}}},render(){const{collapseSlots:i,$slots:d,arrowPlacement:c,collapsed:t,mergedDisplayDirective:m,mergedClsPrefix:a,disabled:u}=this,e=ye(d.header,{collapsed:t},()=>[this.title]),n=d["header-extra"]||i["header-extra"],l=d.arrow||i.arrow;return R("div",{class:[`${a}-collapse-item`,`${a}-collapse-item--${c}-arrow-placement`,u&&`${a}-collapse-item--disabled`,!t&&`${a}-collapse-item--active`]},R("div",{class:[`${a}-collapse-item__header`,!t&&`${a}-collapse-item__header--active`]},R("div",{class:`${a}-collapse-item__header-main`,onClick:this.handleClick},c==="right"&&e,R("div",{class:`${a}-collapse-item-arrow`,key:this.rtlEnabled?0:1},ye(l,{collapsed:t},()=>{var o;return[R(Xe,{clsPrefix:a},{default:(o=i.expandIcon)!==null&&o!==void 0?o:()=>this.rtlEnabled?R(ot,null):R(nt,null)})]})),c==="left"&&e),Ye(n,{collapsed:t},o=>R("div",{class:`${a}-collapse-item__header-extra`,onClick:this.handleClick},o))),R(ht,{clsPrefix:a,displayDirective:m,show:!t},d))}});function he(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ue=function i(d,c,t){function m(e,n){if(!c[e]){if(!d[e]){if(!n&&he)return he(e);if(a)return a(e,!0);throw new Error("Cannot find module '"+e+"'")}var l=c[e]={exports:{}};d[e][0].call(l.exports,function(o){var r=d[e][1][o];return m(r||o)},l,l.exports,i,d,c,t)}return c[e].exports}for(var a=he,u=0;u<t.length;u++)m(t[u]);return m}({1:[function(i,d,c){var t=i("./utils");function m(u,e,n){t.defineNonEnumerable(this,"uploader",u),t.defineNonEnumerable(this,"file",e),t.defineNonEnumerable(this,"bytes",null),this.offset=n,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=t.evalOpts(u.opts.chunkSize,e,this),this.startByte=this.offset*this.chunkSize,this.endByte=this.computeEndByte(),this.xhr=null}var a=m.STATUS={PENDING:"pending",UPLOADING:"uploading",READING:"reading",SUCCESS:"success",ERROR:"error",COMPLETE:"complete",PROGRESS:"progress",RETRY:"retry"};t.extend(m.prototype,{_event:function(u,e){(e=t.toArray(arguments)).unshift(this),this.file._chunkEvent.apply(this.file,e)},computeEndByte:function(){var u=Math.min(this.file.size,(this.offset+1)*this.chunkSize);return this.file.size-u<this.chunkSize&&!this.uploader.opts.forceChunkSize&&(u=this.file.size),u},getParams:function(){return{chunkNumber:this.offset+1,chunkSize:this.chunkSize,currentChunkSize:this.endByte-this.startByte,totalSize:this.file.size,identifier:this.file.uniqueIdentifier,filename:this.file.name,relativePath:this.file.relativePath,totalChunks:this.file.chunks.length}},getTarget:function(u,e){return e.length?(u.indexOf("?")<0?u+="?":u+="&",u+e.join("&")):u},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",l,!1),this.xhr.addEventListener("error",l,!1);var u=t.evalOpts(this.uploader.opts.testMethod,this.file,this),e=this.prepareXhrRequest(u,!0);this.xhr.send(e);var n=this;function l(o){var r=n.status(!0);r===a.ERROR?(n._event(r,n.message()),n.uploader.uploadNextChunk()):r===a.SUCCESS?(n._event(r,n.message()),n.tested=!0):n.file.paused||(n.tested=!0,n.send())}},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(u){this.readState=2,this.bytes=u,this.send()},send:function(){var u=this.uploader.opts.preprocess,e=this.uploader.opts.readFileFn;if(t.isFunction(u))switch(this.preprocessState){case 0:return this.preprocessState=1,void u(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void e(this.file,this.file.fileType,this.startByte,this.endByte,this);case 1:return}if(!this.uploader.opts.testChunks||this.tested){this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",r,!1),this.xhr.addEventListener("load",h,!1),this.xhr.addEventListener("error",h,!1);var n=t.evalOpts(this.uploader.opts.uploadMethod,this.file,this),l=this.prepareXhrRequest(n,!1,this.uploader.opts.method,this.bytes);this.xhr.send(l);var o=this}else this.test();function r(_){_.lengthComputable&&(o.loaded=_.loaded,o.total=_.total),o._event(a.PROGRESS,_)}function h(_){var s=o.message();o.processingResponse=!0,o.uploader.opts.processResponse(s,function(p,f){if(o.processingResponse=!1,o.xhr){o.processedState={err:p,res:f};var g=o.status();if(g===a.SUCCESS||g===a.ERROR)o._event(g,f),g===a.ERROR&&o.uploader.uploadNextChunk();else{o._event(a.RETRY,f),o.pendingRetry=!0,o.abort(),o.retries++;var y=o.uploader.opts.chunkRetryInterval;y!==null?setTimeout(function(){o.send()},y):o.send()}}},o.file,o)}},abort:function(){var u=this.xhr;this.xhr=null,this.processingResponse=!1,this.processedState=null,u&&u.abort()},status:function(u){if(this.readState===1)return a.READING;if(this.pendingRetry||this.preprocessState===1)return a.UPLOADING;if(this.xhr){if(this.xhr.readyState<4||this.processingResponse)return a.UPLOADING;var e;this.uploader.opts.successStatuses.indexOf(this.xhr.status)>-1?e=a.SUCCESS:this.uploader.opts.permanentErrors.indexOf(this.xhr.status)>-1||!u&&this.retries>=this.uploader.opts.maxChunkRetries?e=a.ERROR:(this.abort(),e=a.PENDING);var n=this.processedState;return n&&n.err&&(e=a.ERROR),e}return a.PENDING},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var u=this.status();return u===a.SUCCESS||u===a.ERROR?1:u===a.PENDING?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var u=this.endByte-this.startByte;return this.status()!==a.SUCCESS&&(u=this.progress()*u),u},prepareXhrRequest:function(u,e,n,l){var o=t.evalOpts(this.uploader.opts.query,this.file,this,e);o=t.extend(this.getParams(),o),o=this.uploader.opts.processParams(o,this.file,this,e);var r=t.evalOpts(this.uploader.opts.target,this.file,this,e),h=null;if(u==="GET"||n==="octet"){var _=[];t.each(o,function(s,p){_.push([encodeURIComponent(p),encodeURIComponent(s)].join("="))}),r=this.getTarget(r,_),h=l||null}else h=new FormData,t.each(o,function(s,p){h.append(p,s)}),l!==void 0&&h.append(this.uploader.opts.fileParameterName,l,this.file.name);return this.xhr.open(u,r,!0),this.xhr.withCredentials=this.uploader.opts.withCredentials,t.each(t.evalOpts(this.uploader.opts.headers,this.file,this,e),function(s,p){this.xhr.setRequestHeader(p,s)},this),h}}),d.exports=m},{"./utils":5}],2:[function(i,d,c){var t=i("./utils").each,m={_eventData:null,on:function(a,u){this._eventData||(this._eventData={}),this._eventData[a]||(this._eventData[a]=[]);var e=!1;t(this._eventData[a],function(n){if(n===u)return e=!0,!1}),e||this._eventData[a].push(u)},off:function(a,u){this._eventData||(this._eventData={}),this._eventData[a]&&this._eventData[a].length&&(u?t(this._eventData[a],function(e,n){if(e===u)return this._eventData[a].splice(n,1),!1},this):this._eventData[a]=[])},trigger:function(a){if(this._eventData||(this._eventData={}),!this._eventData[a])return!0;var u=this._eventData[a].slice.call(arguments,1),e=!1;return t(this._eventData[a],function(n){e=n.apply(this,u)===!1||e},this),!e}};d.exports=m},{"./utils":5}],3:[function(i,d,c){var t=i("./utils"),m=i("./event"),a=i("./file"),u=i("./chunk"),e="0.6.0",n=typeof window>"u",l=!n&&window.navigator.msPointerEnabled,o=function(){if(n)return!1;var s="slice",p=t.isDefined(window.File)&&t.isDefined(window.Blob)&&t.isDefined(window.FileList),f=null;return p&&(f=window.Blob.prototype,t.each(["slice","webkitSlice","mozSlice"],function(g){if(f[g])return s=g,!1}),p=!!f[s]),p&&(h.sliceName=s),f=null,p}(),r=function(){if(n)return!1;var s=window.document.createElement("input");s.type="file";var p="webkitdirectory"in s||"directory"in s;return s=null,p}();function h(s){this.support=o,this.support&&(this.supportDirectory=r,t.defineNonEnumerable(this,"filePaths",{}),this.opts=t.extend({},h.defaults,s||{}),this.preventEvent=t.bind(this._preventEvent,this),a.call(this,this))}var _=function(s,p,f,g,y){y.readFinished(s.file[h.sliceName](f,g,p))};h.version=e,h.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:_,checkChunkUploadedByResponse:null,initialPaused:!1,processResponse:function(s,p){p(null,s)},processParams:function(s){return s}},h.utils=t,h.event=m,h.File=a,h.Chunk=u,h.prototype=t.extend({},a.prototype),t.extend(h.prototype,m),t.extend(h.prototype,{constructor:h,_trigger:function(s){var p=t.toArray(arguments),f=!this.trigger.apply(this,arguments);return s!=="catchAll"&&(p.unshift("catchAll"),f=!this.trigger.apply(this,p)||f),!f},_triggerAsync:function(){var s=arguments;t.nextTick(function(){this._trigger.apply(this,s)},this)},addFiles:function(s,p){var f=[],g=this.fileList.length;t.each(s,function(v){if((!l||l&&v.size>0)&&(v.size%4096!=0||v.name!=="."&&v.fileName!==".")){var F=this.generateUniqueIdentifier(v);if(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(F)){var b=new a(this,v,this);b.uniqueIdentifier=F,this._trigger("fileAdded",b,p)?f.push(b):a.prototype.removeFile.call(this,b)}}},this);var y=this.fileList.slice(g);this._trigger("filesAdded",f,y,p)?(t.each(f,function(v){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(v)},this),this._trigger("filesSubmitted",f,y,p)):t.each(y,function(v){a.prototype.removeFile.call(this,v)},this)},addFile:function(s,p){this.addFiles([s],p)},cancel:function(){for(var s=this.fileList.length-1;s>=0;s--)this.fileList[s].cancel()},removeFile:function(s){a.prototype.removeFile.call(this,s),this._trigger("fileRemoved",s)},generateUniqueIdentifier:function(s){var p=this.opts.generateUniqueIdentifier;if(t.isFunction(p))return p(s);var f=s.relativePath||s.webkitRelativePath||s.fileName||s.name;return s.size+"-"+f.replace(/[^0-9a-zA-Z_-]/gim,"")},getFromUniqueIdentifier:function(s){var p=!1;return t.each(this.files,function(f){if(f.uniqueIdentifier===s)return p=f,!1}),p},uploadNextChunk:function(s){var p=!1,f=u.STATUS.PENDING,g=this.uploader.opts.checkChunkUploadedByResponse;if(this.opts.prioritizeFirstAndLastChunk&&(t.each(this.files,function(v){if(!v.paused&&(!g||v._firstResponse||!v.isUploading()))return v.chunks.length&&v.chunks[0].status()===f?(v.chunks[0].send(),p=!0,!1):v.chunks.length>1&&v.chunks[v.chunks.length-1].status()===f?(v.chunks[v.chunks.length-1].send(),p=!0,!1):void 0}),p))return p;if(t.each(this.files,function(v){if(!v.paused){if(g&&!v._firstResponse&&v.isUploading())return;t.each(v.chunks,function(F){if(F.status()===f)return F.send(),p=!0,!1})}if(p)return!1}),p)return!0;var y=!1;return t.each(this.files,function(v){if(!v.isComplete())return y=!0,!1}),y||s||!this.files.length||this._triggerAsync("complete"),y},upload:function(s){var p=this._shouldUploadNext();if(p!==!1){!s&&this._trigger("uploadStart");for(var f=!1,g=1;g<=this.opts.simultaneousUploads-p&&((f=this.uploadNextChunk(!s)||f)||!s);g++);f||s||this._triggerAsync("complete")}},_shouldUploadNext:function(){var s=0,p=!0,f=this.opts.simultaneousUploads,g=u.STATUS.UPLOADING;return t.each(this.files,function(y){return t.each(y.chunks,function(v){if(v.status()===g&&++s>=f)return p=!1,!1}),p}),p&&s},assignBrowse:function(s,p,f,g){s.length===void 0&&(s=[s]),t.each(s,function(y){var v;y.tagName==="INPUT"&&y.type==="file"?v=y:((v=document.createElement("input")).setAttribute("type","file"),t.extend(v.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),y.appendChild(v),y.addEventListener("click",function(b){y.tagName.toLowerCase()!=="label"&&v.click()},!1)),this.opts.singleFile||f||v.setAttribute("multiple","multiple"),p&&v.setAttribute("webkitdirectory","webkitdirectory"),g&&t.each(g,function(b,k){v.setAttribute(k,b)});var F=this;v.addEventListener("change",function(b){F._trigger(b.type,b),b.target.value&&(F.addFiles(b.target.files,b),b.target.value="")},!1)},this)},onDrop:function(s){this._trigger(s.type,s),this.opts.onDropStopPropagation&&s.stopPropagation(),s.preventDefault(),this._parseDataTransfer(s.dataTransfer,s)},_parseDataTransfer:function(s,p){s.items&&s.items[0]&&s.items[0].webkitGetAsEntry?this.webkitReadDataTransfer(s,p):this.addFiles(s.files,p)},webkitReadDataTransfer:function(s,p){var f=this,g=s.items.length,y=[];function v(A){A.readEntries(function(P){P.length?(g+=P.length,t.each(P,function(U){if(U.isFile){var H=U.fullPath;U.file(function(se){F(se,H)},b)}else U.isDirectory&&v(U.createReader())}),v(A)):k()},b)}function F(A,P){A.relativePath=P.substring(1),y.push(A),k()}function b(A){throw A}function k(){--g==0&&f.addFiles(y,p)}t.each(s.items,function(A){var P=A.webkitGetAsEntry();P?P.isFile?F(A.getAsFile(),P.fullPath):v(P.createReader()):k()})},_assignHelper:function(s,p,f){s.length===void 0&&(s=[s]);var g=f?"removeEventListener":"addEventListener";t.each(s,function(y){t.each(p,function(v,F){y[g](F,v,!1)},this)},this)},_preventEvent:function(s){t.preventEvent(s),this._trigger(s.type,s)},assignDrop:function(s){this._onDrop=t.bind(this.onDrop,this),this._assignHelper(s,{dragover:this.preventEvent,dragenter:this.preventEvent,dragleave:this.preventEvent,drop:this._onDrop})},unAssignDrop:function(s){this._assignHelper(s,{dragover:this.preventEvent,dragenter:this.preventEvent,dragleave:this.preventEvent,drop:this._onDrop},!0),this._onDrop=null}}),d.exports=h},{"./chunk":1,"./event":2,"./file":4,"./utils":5}],4:[function(i,d,c){var t=i("./utils"),m=i("./chunk");function a(e,n,l){t.defineNonEnumerable(this,"uploader",e),this.isRoot=this.isFolder=e===this,t.defineNonEnumerable(this,"parent",l||null),t.defineNonEnumerable(this,"files",[]),t.defineNonEnumerable(this,"fileList",[]),t.defineNonEnumerable(this,"chunks",[]),t.defineNonEnumerable(this,"_errorFiles",[]),t.defineNonEnumerable(this,"file",null),this.id=t.uid(),this.isRoot||!n?this.file=null:t.isString(n)?(this.isFolder=!0,this.file=null,this.path=n,this.parent.path&&(n=n.substr(this.parent.path.length)),this.name=n.charAt(n.length-1)==="/"?n.substr(0,n.length-1):n):(this.file=n,this.fileType=this.file.type,this.name=n.fileName||n.name,this.size=n.size,this.relativePath=n.relativePath||n.webkitRelativePath||this.name,this._parseFile()),this.paused=e.opts.initialPaused,this.error=!1,this.allError=!1,this.aborted=!1,this.completed=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function u(e){var n=[],l=e.split("/"),o=l.length,r=1;if(l.splice(o-1,1),o--,l.length)for(;r<=o;)n.push(l.slice(0,r++).join("/")+"/");return n}t.extend(a.prototype,{_parseFile:function(){var e=u(this.relativePath);if(e.length){var n=this.uploader.filePaths;t.each(e,function(l,o){var r=n[l];r||(r=new a(this.uploader,l,this.parent),n[l]=r,this._updateParentFileList(r)),this.parent=r,r.files.push(this),e[o+1]||r.fileList.push(this)},this)}else this._updateParentFileList()},_updateParentFileList:function(e){e||(e=this);var n=this.parent;n&&n.fileList.push(e)},_eachAccess:function(e,n){this.isFolder?t.each(this.files,function(l,o){return e.call(this,l,o)},this):n.call(this,this)},bootstrap:function(){if(!this.isFolder){var e=this.uploader.opts;t.isFunction(e.initFileFn)&&e.initFileFn.call(this,this),this.abort(!0),this._resetError(),this._prevProgress=0;for(var n=e.forceChunkSize?Math.ceil:Math.floor,l=Math.max(n(this.size/e.chunkSize),1),o=0;o<l;o++)this.chunks.push(new m(this.uploader,this,o))}},_measureSpeed:function(){var e=this.uploader.opts.speedSmoothingFactor,n=Date.now()-this._lastProgressCallback;if(n){var l=this.sizeUploaded();this.currentSpeed=Math.max((l-this._prevUploadedSize)/n*1e3,0),this.averageSpeed=e*this.currentSpeed+(1-e)*this.averageSpeed,this._prevUploadedSize=l,this.parent&&this.parent._checkProgress()&&this.parent._measureSpeed()}},_checkProgress:function(e){return Date.now()-this._lastProgressCallback>=this.uploader.opts.progressCallbacksInterval},_chunkEvent:function(e,n,l){var o=this.uploader,r=m.STATUS,h=this,_=this.getRoot(),s=function(){h._measureSpeed(),o._trigger("fileProgress",_,h,e),h._lastProgressCallback=Date.now()};switch(n){case r.PROGRESS:this._checkProgress()&&s();break;case r.ERROR:this._error(),this.abort(!0),o._trigger("fileError",_,this,l,e);break;case r.SUCCESS:if(this._updateUploadedChunks(l,e),this.error)return;clearTimeout(this._progeressId),this._progeressId=0;var p=Date.now()-this._lastProgressCallback;p<o.opts.progressCallbacksInterval&&(this._progeressId=setTimeout(s,o.opts.progressCallbacksInterval-p)),this.isComplete()?(clearTimeout(this._progeressId),s(),this.currentSpeed=0,this.averageSpeed=0,o._trigger("fileSuccess",_,this,l,e),_.isComplete()&&o._trigger("fileComplete",_,this)):this._progeressId||s();break;case r.RETRY:o._trigger("fileRetry",_,this,e)}},_updateUploadedChunks:function(e,n){var l=this.uploader.opts.checkChunkUploadedByResponse;if(l){var o=n.xhr;t.each(this.chunks,function(r){if(!r.tested){var h=l.call(this,r,e);r!==n||h||(r.xhr=null),h&&(r.xhr=o),r.tested=!0}},this),this._firstResponse?this.uploader.uploadNextChunk():(this._firstResponse=!0,this.uploader.upload(!0))}else this.uploader.uploadNextChunk()},_error:function(){this.error=this.allError=!0;for(var e=this.parent;e&&e!==this.uploader;)e._errorFiles.push(this),e.error=!0,e._errorFiles.length===e.files.length&&(e.allError=!0),e=e.parent},_resetError:function(){this.error=this.allError=!1;for(var e=this.parent,n=-1;e&&e!==this.uploader;)n=e._errorFiles.indexOf(this),e._errorFiles.splice(n,1),e.allError=!1,e._errorFiles.length||(e.error=!1),e=e.parent},isComplete:function(){if(!this.completed){var e=!1;this._eachAccess(function(n){if(!n.isComplete())return e=!0,!1},function(){if(this.error)e=!0;else{var n=m.STATUS;t.each(this.chunks,function(l){var o=l.status();if(o===n.ERROR||o===n.PENDING||o===n.UPLOADING||o===n.READING||l.preprocessState===1||l.readState===1)return e=!0,!1})}}),this.completed=!e}return this.completed},isUploading:function(){var e=!1;return this._eachAccess(function(n){if(n.isUploading())return e=!0,!1},function(){var n=m.STATUS.UPLOADING;t.each(this.chunks,function(l){if(l.status()===n)return e=!0,!1})}),e},resume:function(){this._eachAccess(function(e){e.resume()},function(){this.paused=!1,this.aborted=!1,this.uploader.upload()}),this.paused=!1,this.aborted=!1},pause:function(){this._eachAccess(function(e){e.pause()},function(){this.paused=!0,this.abort()}),this.paused=!0},cancel:function(){this.uploader.removeFile(this)},retry:function(e){var n=function(l){l.error&&l.bootstrap()};e?e.bootstrap():this._eachAccess(n,function(){this.bootstrap()}),this.uploader.upload()},abort:function(e){if(!this.aborted){this.currentSpeed=0,this.averageSpeed=0,this.aborted=!e;var n=this.chunks;e&&(this.chunks=[]);var l=m.STATUS.UPLOADING;t.each(n,function(o){o.status()===l&&(o.abort(),this.uploader.uploadNextChunk())},this)}},progress:function(){var e=0,n=0,l=0;return this._eachAccess(function(o,r){e+=o.progress()*o.size,n+=o.size,r===this.files.length-1&&(l=n>0?e/n:this.isComplete()?1:0)},function(){if(this.error)l=1;else{if(this.chunks.length===1)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),void(l=this._prevProgress);var o=0;t.each(this.chunks,function(h){o+=h.progress()*(h.endByte-h.startByte)});var r=o/this.size;this._prevProgress=Math.max(this._prevProgress,r>.9999?1:r),l=this._prevProgress}}),l},getSize:function(){var e=0;return this._eachAccess(function(n){e+=n.size},function(){e+=this.size}),e},getFormatSize:function(){var e=this.getSize();return t.formatSize(e)},getRoot:function(){if(this.isRoot)return this;for(var e=this.parent;e;){if(e.parent===this.uploader)return e;e=e.parent}return this},sizeUploaded:function(){var e=0;return this._eachAccess(function(n){e+=n.sizeUploaded()},function(){t.each(this.chunks,function(n){e+=n.sizeUploaded()})}),e},timeRemaining:function(){var e=0,n=0,l=0;return this._eachAccess(function(r,h){r.paused||r.error||(n+=r.size-r.sizeUploaded(),l+=r.averageSpeed),h===this.files.length-1&&(e=o(n,l))},function(){if(this.paused||this.error)e=0;else{var r=this.size-this.sizeUploaded();e=o(r,this.averageSpeed)}}),e;function o(r,h){return r&&!h?Number.POSITIVE_INFINITY:r||h?Math.floor(r/h):0}},removeFile:function(e){if(e.isFolder)for(;e.files.length;){var n=e.files[e.files.length-1];this._removeFile(n)}this._removeFile(e)},_delFilePath:function(e){e.path&&this.filePaths&&delete this.filePaths[e.path],t.each(e.fileList,function(n){this._delFilePath(n)},this)},_removeFile:function(e){if(!e.isFolder){t.each(this.files,function(o,r){if(o===e)return this.files.splice(r,1),!1},this),e.abort();for(var n,l=e.parent;l&&l!==this;)n=l.parent,l._removeFile(e),l=n}e.parent===this&&t.each(this.fileList,function(o,r){if(o===e)return this.fileList.splice(r,1),!1},this),this.isRoot||!this.isFolder||this.files.length||(this.parent._removeFile(this),this.uploader._delFilePath(this)),e.parent=null},getType:function(){return this.isFolder?"folder":this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.isFolder?"":this.name.substr(2+(~-this.name.lastIndexOf(".")>>>0)).toLowerCase()}}),d.exports=a},{"./chunk":1,"./utils":5}],5:[function(i,d,c){var t=Object.prototype,m=Array.prototype,a=t.toString,u=function(r){return a.call(r)==="[object Function]"},e=Array.isArray||function(r){return a.call(r)==="[object Array]"},n=function(r){return a.call(r)==="[object Object]"&&Object.getPrototypeOf(r)===t},l=0,o={uid:function(){return++l},noop:function(){},bind:function(r,h){return function(){return r.apply(h,arguments)}},preventEvent:function(r){r.preventDefault()},stop:function(r){r.preventDefault(),r.stopPropagation()},nextTick:function(r,h){setTimeout(o.bind(r,h),0)},toArray:function(r,h,_){return h===void 0&&(h=0),_===void 0&&(_=r.length),m.slice.call(r,h,_)},isPlainObject:n,isFunction:u,isArray:e,isObject:function(r){return Object(r)===r},isString:function(r){return typeof r=="string"},isUndefined:function(r){return r===void 0},isDefined:function(r){return r!==void 0},each:function(r,h,_){if(o.isDefined(r.length))for(var s=0,p=r.length;s<p&&h.call(_,r[s],s,r)!==!1;s++);else for(var f in r)if(h.call(_,r[f],f,r)===!1)break},evalOpts:function(r,h){return o.isFunction(r)&&(h=o.toArray(arguments),r=r.apply(null,h.slice(1))),r},extend:function(){var r,h,_,s,p,f,g=arguments[0]||{},y=1,v=arguments.length,F=!1;for(typeof g=="boolean"&&(F=g,g=arguments[1]||{},y++),typeof g=="object"||u(g)||(g={}),y===v&&(g=this,y--);y<v;y++)if((r=arguments[y])!=null)for(h in r)_=g[h],g!==(s=r[h])&&(F&&s&&(n(s)||(p=e(s)))?(p?(p=!1,f=_&&e(_)?_:[]):f=_&&n(_)?_:{},g[h]=o.extend(F,f,s)):s!==void 0&&(g[h]=s));return g},formatSize:function(r){return r<1024?r.toFixed(0)+" bytes":r<1048576?(r/1024).toFixed(0)+" KB":r<1073741824?(r/1024/1024).toFixed(1)+" MB":(r/1024/1024/1024).toFixed(1)+" GB"},defineNonEnumerable:function(r,h,_){Object.defineProperty(r,h,{enumerable:!1,configurable:!0,writable:!0,value:_})}};d.exports=o},{}]},{},[3])(3);/*!
 * Uploader - Uploader library implements html5 file upload and provides multiple simultaneous, stable, fault tolerant and resumable uploads
 * @version v0.6.0
 * @author dolymood <dolymood@gmail.com>
 * @link https://github.com/simple-uploader/Uploader
 * @license MIT
 */function fe(i){return i.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}const Q={name:"uploader-btn",props:{directory:{type:Boolean,default:!1},single:{type:Boolean,default:!1},attrs:{type:Object,default:()=>({})}},setup(i){const d=E(null),c=Y("uploader"),t=c.support;return Re(()=>{De(()=>{c.assignBrowse(d.value,i.directory,i.single,i.attrs)})}),{btn:d,support:t}}},gt={class:"uploader-btn",ref:"btn"};Q.render=function(i,d,c,t,m,a){return V((w(),D("label",gt,[$(i.$slots,"default")],512)),[[X,t.support]])};const ee={name:"uploader-drop",setup(){const i=Y("uploader");let d=E(null),c=E("");const t=i.support,m=()=>{c="uploader-dragover"},a=()=>{c=""},u=()=>{c="uploader-droped"};return De(()=>{const e=d.value;i.assignDrop(e),i.on("dragenter",m),i.on("dragleave",a),i.on("drop",u)}),Je(()=>{const e=d.value;i.off("dragenter",m),i.off("dragleave",a),i.off("drop",u),i.unAssignDrop(e)}),{drop:d,dropClass:c,support:t,onDragEnter:m,onDragLeave:a,onDrop:u}}};ee.render=function(i,d,c,t,m,a){return V((w(),D("div",{class:["uploader-drop",t.dropClass],ref:"drop"},[$(i.$slots,"default")],2)),[[X,t.support]])};const te={name:"uploader-unsupport",setup:()=>({support:Y("uploader").support})},vt={class:"uploader-unsupport"},_t=S("p",null,[M(" Your browser, unfortunately, is not supported by Uploader.js. The library requires support for "),S("a",{href:"http://www.w3.org/TR/FileAPI/"},"the HTML5 File API"),M(" along with "),S("a",{href:"http://www.w3.org/TR/FileAPI/#normalization-of-params"},"file slicing"),M(". ")],-1);te.render=function(i,d,c,t,m,a){return V((w(),D("div",vt,[$(i.$slots,"default",{},()=>[_t])],512)),[[X,!t.support]])};const Ce=["fileProgress","fileSuccess","fileComplete","fileError"],G={name:"uploader-file",props:{file:{type:Object,default:()=>({})},list:{type:Boolean,default:!1}},setup(i){const d=Pe();let c={},t=0;const m=E(null),a=E(!1),u=E(!1),e=E(0),n=E(0),l=E(!1),o=E(!1),r=E(0),h=E(""),_=E(0),s=E(0),p=E(0),f=E(""),g=E(""),y=E(""),v=B(()=>{let x=i.file.isFolder?"folder":"unknown";const C=i.file.uploader.opts.categoryMap||{image:["gif","jpg","jpeg","png","bmp","webp"],video:["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"],audio:["mp3","wav","wma","ogg","aac","flac"],document:["doc","txt","docx","pages","epub","pdf","numbers","csv","xls","xlsx","keynote","ppt","pptx"]};return Object.keys(C).forEach(N=>{C[N].indexOf(g.value)>-1&&(x=N)}),x}),F=B(()=>{s.value=Math.floor(100*s.value);const x=`translateX(${Math.floor(s.value-100)}%)`;return{progress:`${s.value}%`,webkitTransform:x,mozTransform:x,msTransform:x,transform:x}}),b=B(()=>`${Ue.utils.formatSize(e.value)} / s`),k=B(()=>{let x=u;return l.value?"success":x.value?"error":o.value?"uploading":a.value?"paused":"waiting"}),A=B(()=>{const x=i.file.uploader.fileStatusText;let C=k.value;return C=typeof x=="function"?x(k.value,m.value):x[k.value],C||k}),P=B(()=>{const x=i.file;if(p.value===Number.POSITIVE_INFINITY||p.value===0)return"";let C=function(q){const J=Math.floor(q/31536e3);if(J)return J+" year"+W(J);const ue=Math.floor((q%=31536e3)/86400);if(ue)return ue+" day"+W(ue);const de=Math.floor((q%=86400)/3600);if(de)return de+" hour"+W(de);const pe=Math.floor((q%=3600)/60);if(pe)return pe+" minute"+W(pe);const _e=q%60;return _e+" second"+W(_e);function W(Te){return Te>1?"s":""}}(p.value);const N=x.uploader.opts.parseTimeRemaining;return N&&(C=N(p.value,C)),C}),U=()=>{a.value=i.file.paused,u.value=i.file.error,o.value=i.file.isUploading()},H=x=>{let C=x;try{C=JSON.parse(x)}catch(N){}m.value=C},se=(x,C)=>{const N=C[0],q=C[1],J=i.list?N:q;if(JSON.stringify(i.file)===JSON.stringify(J)){if(i.list&&x==="fileSuccess")return void H(C[2]);d.setupState[x](...C)}},ne=()=>{s.value=i.file.progress(),e.value=i.file.averageSpeed,n.value=i.file.currentSpeed,p.value=i.file.timeRemaining(),_.value=i.file.sizeUploaded(),U()},ve=(x,C,N)=>{x&&H(N),ne(),u.value=!1,l.value=!0,o.value=!1};return We(k,(x,C)=>{C&&x==="uploading"&&C!=="uploading"?t=setTimeout(()=>{y.value="uploader-file-progressing"},200):(clearTimeout(t),y.value="")}),Re(()=>{a.value=i.file.paused,u.value=i.file.error,e.value=i.file.averageSpeed,n.value=i.file.currentSpeed,l.value=i.file.isComplete(),o.value=i.file.isUploading(),r.value=i.file.getSize(),h.value=i.file.getFormatSize(),_.value=i.file.sizeUploaded(),s.value=i.file.progress(),p.value=i.file.timeRemaining(),f.value=i.file.getType(),g.value=i.file.getExtension(),Ce.forEach(x=>{i.file.uploader.on(x,(C=>(c[C]=(...N)=>{se(C,N)},c[C]))(x))})}),Ae(()=>{Ce.forEach(x=>{i.file.uploader.off(x,c[x])}),c=null}),{response:m,paused:a,error:u,averageSpeed:e,currentSpeed:n,isComplete:l,isUploading:o,size:r,formatedSize:h,uploadedSize:_,progress:s,timeRemaining:p,type:f,extension:g,progressingClass:y,fileCategory:v,progressStyle:F,formatedAverageSpeed:b,status:k,statusText:A,formatedTimeRemaining:P,actionCheck:U,pause:()=>{i.file.pause(),U(),ne()},resume:()=>{i.file.resume(),U()},remove:()=>{i.file.cancel()},retry:()=>{i.file.retry(),U()},processResponse:H,fileEventsHandler:se,fileProgress:ne,fileSuccess:ve,fileComplete:()=>{ve()},fileError:(x,C,N)=>{ne(),H(N),u.value=!0,l.value=!1,o.value=!1}}}},yt={class:"uploader-file-info"},St={class:"uploader-file-name"},xt={class:"uploader-file-size"},Ft=S("div",{class:"uploader-file-meta"},null,-1),Ct={class:"uploader-file-status"},bt={class:"uploader-file-actions"};G.render=function(i,d,c,t,m,a){return w(),D("div",{class:"uploader-file",status:t.status},[$(i.$slots,"default",{file:c.file,list:c.list,status:t.status,paused:t.paused,error:t.error,response:t.response,averageSpeed:t.averageSpeed,formatedAverageSpeed:t.formatedAverageSpeed,currentSpeed:t.currentSpeed,isComplete:t.isComplete,isUploading:t.isUploading,size:t.size,formatedSize:t.formatedSize,uploadedSize:t.uploadedSize,progress:t.progress,progressStyle:t.progressStyle,progressingClass:t.progressingClass,timeRemaining:t.timeRemaining,formatedTimeRemaining:t.formatedTimeRemaining,type:t.type,extension:t.extension,fileCategory:t.fileCategory},()=>[S("div",{class:["uploader-file-progress",t.progressingClass],style:t.progressStyle},null,6),S("div",yt,[S("div",St,[S("i",{class:"uploader-file-icon",icon:t.fileCategory},null,8,["icon"]),M(L(c.file.name),1)]),S("div",xt,L(t.formatedSize),1),Ft,S("div",Ct,[V(S("span",null,L(t.statusText),513),[[X,t.status!=="uploading"]]),V(S("span",null,[S("span",null,L(t.progressStyle.progress)+"\xA0",1),S("em",null,L(t.formatedAverageSpeed)+"\xA0",1),S("i",null,L(t.formatedTimeRemaining),1)],512),[[X,t.status==="uploading"]])]),S("div",bt,[S("span",{class:"uploader-file-pause",onClick:d[1]||(d[1]=(...u)=>t.pause&&t.pause(...u))}),S("span",{class:"uploader-file-resume",onClick:d[2]||(d[2]=(...u)=>t.resume&&t.resume(...u))},"\uFE0F"),S("span",{class:"uploader-file-retry",onClick:d[3]||(d[3]=(...u)=>t.retry&&t.retry(...u))}),S("span",{class:"uploader-file-remove",onClick:d[4]||(d[4]=(...u)=>t.remove&&t.remove(...u))})])])])],8,["status"])};const ie={name:"uploader-list",components:{UploaderFile:G},setup:()=>({fileList:Y("uploader").fileList})},Et={class:"uploader-list"};ie.render=function(i,d,c,t,m,a){const u=T("uploader-file");return w(),D("div",Et,[$(i.$slots,"default",{fileList:t.fileList},()=>[S("ul",null,[(w(!0),D(me,null,ge(t.fileList,e=>(w(),D("li",{key:e.id},[S(u,{file:e,list:!0},null,8,["file"])]))),128))])])])};const re={name:"uploader-files",components:{UploaderFile:G},setup:()=>({files:Y("uploader").files})},wt={class:"uploader-files"};re.render=function(i,d,c,t,m,a){const u=T("uploader-file");return w(),D("div",wt,[$(i.$slots,"default",{files:t.files},()=>[S("ul",null,[(w(!0),D(me,null,ge(t.files,e=>(w(),D("li",{key:e.id},[S(u,{file:e},null,8,["file"])]))),128))])])])};const ae={name:"uploader",props:{options:{type:Object,default:()=>({})},autoStart:{type:Boolean,default:!0},fileStatusText:{type:[Object,Function],default:()=>({success:"success",error:"error",uploading:"uploading",paused:"paused",waiting:"waiting"})}},setup(i,{emit:d}){const c=E(null),t=E(!1),m=E([]),a=E([]),u=Pe();let e=new Ue(i.options);const n=_=>{const s=Se(_);if(d(fe("fileAdded"),s),s.ignored)return!1},l=(_,s)=>{if(d(fe("filesAdded"),_,s),_.ignored||s.ignored)return!1},o=_=>{m.value=e.files,a.value=e.fileList},r=(_,s)=>{m.value=e.files,a.value=e.fileList,i.autoStart&&e.upload()},h=(..._)=>{const s=_[0],p={fileAdded:!0,filesAdded:!0,uploadStart:"uploadStart"}[s];if(p){if(p===!0)return;u.setupState[p](..._.slice(1))}_[0]=fe(s),d(..._)};return i.options.initialPaused=!i.autoStart,e.fileStatusText=i.fileStatusText,e.on("catchAll",h),e.on("fileAdded",n),e.on("filesAdded",l),e.on("fileRemoved",o),e.on("filesSubmitted",r),Ae(()=>{e.off("catchAll",h),e.off("fileAdded",n),e.off("filesAdded",l),e.off("fileRemoved",o),e.off("filesSubmitted",r),e=null}),we("uploader",Se(e)),{uploader:e,started:t,files:m,fileList:a,uploadStart:()=>{t.value=!0},fileAdded:n,filesAdded:l,fileRemoved:o,filesSubmitted:r,allEvent:h,uploaderList:c}},components:{UploaderBtn:Q,UploaderDrop:ee,UploaderUnsupport:te,UploaderList:ie,UploaderFiles:re,UploaderFile:G}},kt={class:"uploader"},Rt=S("p",null,"Drop files here to upload or",-1),Dt=M("select files"),At=M("select folder");ae.render=function(i,d,c,t,m,a){const u=T("uploader-unsupport"),e=T("uploader-btn"),n=T("uploader-drop"),l=T("uploader-list");return w(),D("div",kt,[$(i.$slots,"default",{files:t.files,fileList:t.fileList,started:t.started},()=>[S(u),S(n,null,{default:z(()=>[Rt,S(e,null,{default:z(()=>[Dt]),_:1}),S(e,{directory:!0},{default:z(()=>[At]),_:1})]),_:1}),S(l)])])};const Pt={version:"1.0.0-beta.5",install:function(i,d){i.component(ae.name,ae),i.component(Q.name,Q),i.component(ee.name,ee),i.component(te.name,te),i.component(ie.name,ie),i.component(re.name,re),i.component(G.name,G)},Uploader:ae,UploaderBtn:Q,UploaderDrop:ee,UploaderUnsupport:te,UploaderList:ie,UploaderFiles:re,UploaderFile:G},ze=Pt;console.log(ze);const Z=30*1024*1024,Nt={components:ze,props:{uploadData:{type:Object,required:!1,default:()=>{}},uploadSuccess:{type:Function,required:!1,default:()=>{}},hideList:{type:Boolean,default:!1}},data(){return{fileInput:null,options:{target:Ke,testChunks:!0,uploadMethod:"post",chunkSize:Z,simultaneousUploads:2,query:(d,c,t)=>({...this.uploadData}),headers:{Authorization:`Bearer ${Ze().token}`},checkChunkUploadedByResponse:(d,c)=>{console.log("chunk",d);let t=JSON.parse(c);if(t.code!==200)throw new Error(t);let m=t.data;return m.uploaded===!0?m.uploaded:(m.uploadedChunks||[]).indexOf(d.offset+1)>=0},parseTimeRemaining:function(d,c){return c.replace(/\syears?/,"\u5E74").replace(/\days?/,"\u5929").replace(/\shours?/,"\u5C0F\u65F6").replace(/\sminutes?/,"\u5206\u949F").replace(/\sseconds?/,"\u79D2")}},fileStatusTextObj:{success:"\u4E0A\u4F20\u6210\u529F",error:"\u4E0A\u4F20\u9519\u8BEF",uploading:"\u6B63\u5728\u4E0A\u4F20",paused:"\u505C\u6B62\u4E0A\u4F20",waiting:"\u7B49\u5F85\u4E2D"},uploadFileList:[]}},mounted(){this.$nextTick(()=>{this.fileInput=document.querySelector(".uploader-btn input[type='file']")})},methods:{uploadBtnHandler(i){i.target&&i.target.tagName==="INPUT"||(i.stopPropagation(),console.log(1))},onFileAdded(i,d){console.log("eeeee",d),console.log("file :>> ",i),console.log("\u6587\u4EF6\u7C7B\u578B\uFF1A"+i.fileType+"\uFF0C\u6587\u4EF6\u5927\u5C0F\uFF1A"+i.size+"B"),console.log("\u6821\u9A8CMD5"),this.getFileMD5(i,async c=>{if(c!==""){i.uniqueIdentifier=c;const t={...this.uploadData,identifier:c,filename:i.name,uploadBefore:!0};et(t).then(()=>{this.uploadFileList.push(i),i.resume()}).catch(()=>{console.log("\u53D6\u6D88\u6587\u4EF6\u4E0A\u4F20"),i.error=!0,i.cancel()})}})},onFileSuccess(i,d,c,t){tt({...this.uploadData,identifier:i.uniqueIdentifier,filename:d.name}).then(m=>{console.log("\u4E0A\u4F20\u6210\u529F",i,d,c,t),window.$message.success(m.msg),this.uploadSuccess()}).catch(m=>{d.error=!0,d.cancel()})},onFileError(i,d,c,t){console.log("\u4E0A\u4F20\u51FA\u9519\uFF1A",i,d,c,t);const m=JSON.parse(c);window.$message.error(m.msg)},onFileProgress(i,d,c){console.log(`\u5F53\u524D\u8FDB\u5EA6\uFF1A${Math.ceil(d._prevProgress*100)}%`)},getFileMD5(i,d){i.pause();let c=new SparkMD5.ArrayBuffer,t=new FileReader,m=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,a=0,u=Math.ceil(i.size/Z),e=new Date().getTime();n(),t.onload=function(l){if(c.append(l.target.result),a<u)a++,n();else{let o=c.end();console.log(`MD5\u8BA1\u7B97\u5B8C\u6BD5\uFF1A${o}\uFF0C\u8017\u65F6\uFF1A${new Date().getTime()-e} ms.`),d(o)}},t.onerror=function(){window.$message.error("\u6587\u4EF6\u8BFB\u53D6\u9519\u8BEF"),i.cancel()};function n(){const l=a*Z,o=l+Z>=i.size?i.size:l+Z;t.readAsArrayBuffer(m.call(i.file,l,o))}},fileStatusText(i,d){return i==="md5"?"\u6821\u9A8CMD5":this.fileStatusTextObj[i]},pause(i){console.log("file :>> ",i),i.paused?i.resume():i.pause()},remove(i){this.uploadFileList.forEach((d,c)=>{d.id===i.id&&this.$nextTick(()=>{this.uploadFileList.splice(c,1)})}),i.cancel()},showDetail(i){let d=i.file.name,t=i.isComplete?"":` \u5269\u4F59\u65F6\u95F4:${i.formatedTimeRemaining}`;return i.error?`${d} 	 \u4E0A\u4F20\u5931\u8D25`:`${d} 	 ${t}`},showSpeed(i){return`${i.isComplete?"":` ${i.formatedAverageSpeed}`}`},percentage(i){let d=i.progress;return d-1<0?0:d},progressColor(i){return console.log(i),i.isComplete?"#18A058":i.error?"#D03050":"#2684FE"},download(i,d){console.log("file:>> ",i),window.location.href=`/fileStorage/download/${i.uniqueIdentifier}`},formatFileSize(i,d=2){if(i===0)return"0 B";let c=1e3,t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],m=Math.floor(Math.log(i)/Math.log(c));return parseFloat((i/Math.pow(c,m)).toFixed(d))+" "+t[m]}}};const Ut={key:0,class:"no-file"},zt=j("i",{class:"icon icon-empty-file"},null,-1),Tt={style:{display:"flex","align-items":"center",height:"100%"}},It={style:{width:"100%","margin-right":"10px"}},Bt={style:{display:"flex","align-items":"center"}},Lt={style:{flex:"none"}},Ot={style:{flex:"none"}};function Mt(i,d,c,t,m,a){const u=T("uploader-unsupport"),e=T("uploader-btn"),n=T("uploader-drop"),l=rt,o=Ie,r=Qe,h=T("uploader-file"),_=mt,s=ct,p=T("uploader-list"),f=T("uploader");return w(),D(f,{ref:"uploader",options:i.options,"auto-start":!1,"file-status-text":a.fileStatusText,onFileAdded:a.onFileAdded,onFileSuccess:a.onFileSuccess,onFileError:a.onFileError,onFileProgress:a.onFileProgress},{default:z(()=>[S(u),S(n,null,{default:z(()=>[S(e,{onClick:a.uploadBtnHandler},{default:z(()=>[$(i.$slots,"default",{},()=>[M("\u4E0A\u4F20")])]),_:3},8,["onClick"])]),_:3}),c.hideList===!1?(w(),D(p,{key:0,class:"uploader-list"},{default:z(()=>[S(s,{accordion:"","default-expanded-names":["1"]},{default:z(()=>[S(_,{title:"\u6587\u4EF6\u5217\u8868",name:"1"},{default:z(()=>[i.uploadFileList.length?(w(!0),xe(me,{key:1},ge(i.uploadFileList,g=>(w(),D(h,{key:g.id,file:g,list:!0},{default:z(y=>[j("div",Tt,[j("div",It,[j("div",null,L(a.showDetail(y)),1),j("div",Bt,[j("span",Lt,L(a.showSpeed(y)),1),S(l,{style:{margin:"5px"},type:"line","indicator-placement":"inside","stroke-width":18,format:"e => showDetail(e,props)",percentage:a.percentage(y),color:a.progressColor(y)},null,8,["percentage","color"]),j("span",Ot,L(y.formatedSize),1)])]),y.paused||y.isUploading?(w(),D(r,{key:0,circle:"",tertiary:"",onClick:v=>a.pause(g)},{icon:z(()=>[S(o,{name:g.paused?"fa-circle-play":"fa-circle-pause"},null,8,["name"])]),_:2},1032,["onClick"])):Fe("",!0),S(r,{circle:"",tertiary:"",onClick:v=>a.remove(g)},{icon:z(()=>[S(o,{name:"fa-circle-xmark"})]),_:2},1032,["onClick"])])]),_:2},1032,["file"]))),128)):(w(),xe("div",Ut,[zt,M(" \u6682\u65E0\u5F85\u4E0A\u4F20\u6587\u4EF6 ")]))]),_:1})]),_:1})]),_:1})):Fe("",!0)]),_:3},8,["options","file-status-text","onFileAdded","onFileSuccess","onFileError","onFileProgress"])}const Yt=it(Nt,[["render",Mt]]);export{Yt as _};
