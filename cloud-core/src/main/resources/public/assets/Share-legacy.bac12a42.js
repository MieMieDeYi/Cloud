System.register(["./index-legacy.ef81fb63.js","./common-legacy.2db70d40.js","./_plugin-vue_export-helper-legacy.649209c3.js","./FilePath-legacy.cab81de9.js","./FilePreview-legacy.f61123d5.js","./Empty-legacy.4d208b5e.js","./DataTable-legacy.c7307b24.js","./Explore-legacy.0d0e59ed.js","./YIcon-legacy.09bc7dc4.js","./Icon-legacy.5502205d.js","./use-merged-state-legacy.e6fbc953.js","./Image-legacy.38366048.js","./Tooltip-legacy.b4f0d5ce.js","./get-legacy.3dbeff0a.js","./use-locale-legacy.98661620.js","./temp-legacy.832274bf.js","./Input-legacy.ce9c8742.js","./ChevronRight-legacy.b0b7254a.js"],(function(e,t){"use strict";var a,n,l,i,s,u,r,d,o,c,p,y,v,g,h,f,m,b,w,k,x,j,_,I,L,z,T,F,B,C,E,P,D=document.createElement("style");return D.innerHTML=".password-page[data-v-7e388e65]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.pwd-input[data-v-7e388e65]{width:200px;display:flex;justify-content:space-between;margin-bottom:10px}.pwd-input input[data-v-7e388e65]{text-align:center;width:40px}.share-page[data-v-1bb293c9]{width:100%;height:100%;padding-top:50px;box-sizing:border-box}.share-page .share-header[data-v-1bb293c9]{height:30px;display:flex;flex-direction:column-reverse}[data-v-1bb293c9] .fileLink{cursor:pointer}[data-v-1bb293c9] .fileLink:hover{text-decoration:underline}[data-v-1bb293c9] .fileIcon{margin-right:5px}\n",document.head.appendChild(D),{setters:[e=>{a=e.F,n=e.e,l=e.U,i=e.o,s=e.c,u=e.b,r=e.R,d=e.c2,o=e.a9,c=e.c8,p=e.c7,y=e.bD,v=e.f,g=e.W,h=e.a,f=e._,m=e.bE,b=e.bC,w=e.bz,k=e.g,x=e.X,j=e.bF,_=e.i,I=e.c9},e=>{L=e.A,z=e.s,T=e.f},e=>{F=e._},e=>{B=e.F},e=>{C=e.P},e=>{E=e._},e=>{P=e.p},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const t={class:"password-page"},D=["onUpdate:modelValue","onInput"],$=["onKeypress"],K=F({__name:"PassInput",props:{num:{type:Number,validator:e=>"number"==typeof e&&e>=4,default:4},id:String,pass:Function,passOk:Function},setup(e){const m=e,b=a([]),w=a(null);n((()=>{l((()=>{k=w.value.children;for(let e of k)e.onchange=({target:e})=>{/^[a-zA-Z0-9]$/.test(e.value)||(e.value="")};k[0].focus()}))}));let k=[];const x=function(e,t){if("deleteContentBackward"===t.inputType&&0!=e)k[e-1].focus();else if("insertText"===t.inputType&&e!=m.num-1)k[e+1].focus();else if("insertFromPaste"===t.inputType)if(0==e){let e=t.target.value;if(e.length>=m.num){for(let t=0;t<4;t++)b.value[t]=e[t];t.target.blur()}else t.target.value=""}else b.value[e]=""},j=function(){b.value.join("").length<m.num?window.$message.warning("请输入完整的密码"):function(e){if(!m.pass)return L.pass(m.id,e).then((e=>{b.value.length=0})).then((e=>{m.passOk()})).catch((e=>{b.value=[]}));m.pass(e)}(b.value.join(""))};return(e,a)=>{const n=f;return i(),s("div",t,[u("div",{ref_key:"pwdInputs",ref:w,class:"pwd-input",style:y({width:50*m.num+"px"})},[(i(!0),s(r,null,d(new Array(m.num-1),((e,t)=>o((i(),s("input",{key:t,"onUpdate:modelValue":e=>b.value[t]=e,class:"y-input",onInput:e=>x(t,e)},null,40,D)),[[c,b.value[t]]]))),128)),o(u("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>b.value[m.num-1]=e),class:"y-input",onInput:a[1]||(a[1]=e=>x(m.num-1,e)),onKeypress:p(j,["enter"])},null,40,$),[[c,b.value[m.num-1]]])],4),v(n,{style:y({width:50*m.num+"px"}),type:"success",onClick:j},{default:g((()=>[h(" 确认 ")])),_:1},8,["style"])])}}},[["__scopeId","data-v-7e388e65"]]),S={key:0,class:"share-page"},U={style:{width:"960px",margin:"auto"}},Y={class:"share-header"},M={key:0},A={key:1},H={key:2,class:"resource-list"},R={class:"resource-list"};e("default",F({__name:"Share",setup(e){const t=j(),l=a(t.params.id),r=a(null),d=a([]),o=a(!1);n((()=>{window.$loadingBar.start(),L.pass(l.value,null).then((()=>{c()})).catch((()=>{o.value=!0})),setTimeout((()=>{window.$loadingBar.finish()}),1e4)}));const c=function(e){return null===z().token?(o.value=!0,Promise.resolve(1)):(window.$loadingBar.start(),L.getShareList(l.value,e).then((e=>{r.value=e,console.log(r.value),window.$loadingBar.finish()})))},p=function(e){const t=d.value;0===e?d.value=[]:"number"==typeof e?d.value.splice(e,d.value.length-e):"string"==typeof e&&d.value.push(e),e=d.value.join("/"),c(e).catch((()=>{d.value=t}))},y=a([]),F=function(e){y.value=e},D=m([{type:"selection",disabled:e=>"Edward King 3"===e.id},{title:"文件名",key:"name",render:e=>_("a",{class:"fileLink",style:{color:"dir"===e.type?"#E67E22":"#03885B"},onClick:t=>{t.stopPropagation(),"dir"===e.type&&p(e.name)}},[T(e.type),e.name])},{title:"修改日期",key:"updateTime",width:"170",render:e=>"dir"===e.type?"-":new Date(e.updateTime).format("YYYY/MM/DD HH:mm")},{title:"类型",key:"type",width:"100",render:e=>!0===e.dir?"-":e.type},{title:"大小",key:"size",width:"100",render:e=>{const t=1048576;return"dir"===e.type?"-":e.size>t?(e.size/t).toFixed(2)+"MB":parseInt(e.size/1024)+"KB"}},{title:"操作",key:null,width:"100",render:e=>"dir"!==e.type?_(f,{size:"tiny",type:"info",tertiary:!0,onClick:()=>L.download(e.id,d.value.join("/"))},{default:()=>"下载"}):null}]);return(e,t)=>{const a=E,n=I,y=P;return null!==r.value?(i(),s("div",S,[u("div",U,[u("div",Y,[u("span",null,"过期时间："+b(r.value.deadline?new Date(r.value.deadline):"永久"),1)]),0===r.value.resourceList.length?(i(),s("div",M,[v(a,{description:"你什么也找不到"},{extra:g((()=>[v(w(f),{size:"small"},{default:g((()=>[h(" 看看别的 ")])),_:1})])),_:1})])):1===r.value.resourceList.length?(i(),s("div",A,[v(n,{title:r.value.resourceList[0].name},{"header-extra":g((()=>[v(w(f),{type:"primary",dashed:"",size:"small",onClick:t[0]||(t[0]=e=>w(L).download(r.value.resourceList[0].id,d.value.join("/")))},{default:g((()=>[h(" 下载 ")])),_:1})])),default:g((()=>[v(C,{api:w(L).preview,resource:r.value.resourceList[0]},null,8,["api","resource"])])),_:1},8,["title"])])):(i(),s("div",H,[u("div",R,[v(B,{name:"Share",path:d.value,"click-bread":p},null,8,["path"]),v(y,{bordered:!1,"row-key":e=>e.id?e.id:e.name,columns:w(D),data:r.value.resourceList,"onUpdate:checkedRowKeys":F},null,8,["row-key","columns","data"])])]))])])):o.value?(i(),k(K,{key:1,id:l.value,"pass-ok":()=>c()},null,8,["id","pass-ok"])):x("",!0)}}},[["__scopeId","data-v-1bb293c9"]]))}}}));
