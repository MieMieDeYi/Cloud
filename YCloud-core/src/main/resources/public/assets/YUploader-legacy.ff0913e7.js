!function(){function e(e,t,i,r,s,n,o){try{var l=e[n](o),a=l.value}catch(u){return void i(u)}l.done?t(a):Promise.resolve(a).then(r,s)}function t(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function i(e){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?t(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}System.register(["./YIcon-legacy.09bc7dc4.js","./index-legacy.ef81fb63.js","./Explore-legacy.0d0e59ed.js","./_plugin-vue_export-helper-legacy.649209c3.js","./Progress-legacy.3956cbe5.js","./use-merged-state-legacy.e6fbc953.js","./ChevronRight-legacy.b0b7254a.js"],(function(t,r){"use strict";var s,n,o,l,a,u,p,d,c,h,f,g,v,m,y,b,x,S,w,k,C,A,F,E,_,R,P,D,z,U,T,O,N,L,I,B,M,j,G,q,J,$,V,H,Q,Y,K,W,X,Z,ee,te,ie,re,se,ne,oe,le,ae,ue=document.createElement("style");return ue.innerHTML='.uploader-btn{display:inline-block;position:relative;padding:4px 8px;font-size:100%;line-height:1.4;color:#666;border:1px solid #666;cursor:pointer;border-radius:2px;background:0 0;outline:0}.uploader-btn:hover{background-color:rgba(0,0,0,.08)}.uploader-drop{position:relative;padding:10px;overflow:hidden;border:1px dashed #ccc;background-color:#f5f5f5}.uploader-dragover{border-color:#999;background-color:#f7f7f7}.uploader-unsupport{position:relative;z-index:10;overflow:hidden}.uploader-file{position:relative;height:49px;line-height:49px;overflow:hidden;border-bottom:1px solid #cdcdcd}.uploader-file[status=uploading] .uploader-file-pause,.uploader-file[status=waiting] .uploader-file-pause,.uploader-file[status=paused] .uploader-file-resume,.uploader-file[status=error] .uploader-file-retry{display:block}.uploader-file[status=success] .uploader-file-remove{display:none}.uploader-file[status=error] .uploader-file-progress{background:#ffe0e0}.uploader-file-progress{position:absolute;width:100%;height:100%;background:#e2eeff;-webkit-transform:translateX(-100%);transform:translate(-100%)}.uploader-file-progressing{-webkit-transition:all .4s linear;transition:all .4s linear}.uploader-file-info{position:relative;z-index:1;height:100%;overflow:hidden}.uploader-file-info:hover{background-color:rgba(240,240,240,.2)}.uploader-file-info em,.uploader-file-info i{font-style:normal}.uploader-file-actions,.uploader-file-meta,.uploader-file-name,.uploader-file-size,.uploader-file-status{float:left;position:relative;height:100%}.uploader-file-name{width:45%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-indent:14px}.uploader-file-icon{width:24px;height:24px;display:inline-block;vertical-align:top;margin-top:13px;margin-right:8px}.uploader-file-icon:before{content:"\\1f4c3";display:block;height:100%;font-size:24px;line-height:1;text-indent:0}.uploader-file-icon[icon=folder]:before{content:"\\1f4c2"}.uploader-file-icon[icon=image]:before{content:"\\1f4ca"}.uploader-file-icon[icon=video]:before{content:"\\1f4f9"}.uploader-file-icon[icon=audio]:before{content:"\\1f3b5"}.uploader-file-icon[icon=document]:before{content:"\\1f4cb"}.uploader-file-size{width:13%;text-indent:10px}.uploader-file-meta{width:8%}.uploader-file-status{width:24%;text-indent:20px}.uploader-file-actions{width:10%}.uploader-file-actions>span{display:none;float:left;width:16px;height:16px;margin-top:16px;margin-right:10px;cursor:pointer;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAABkCAYAAAD0ZHJ6AAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAACxMAAAsTAQCanBgAAARkSURBVGje7ZnfS1NRHMAH4ptPkvQSuAdBkCxD8FUQJMEULUgzy1KyyPVQ4JMiiP4Bvg6EwUQQfMmwhwRDshwaKUjDVCgoSdDNHkzTJZ6+Z37Purve8+PeTb2TM/ggu+ew89l33x8H9BBCPG7GowXTJej3+wnDvEm0JuLC04+EYWftVAUv+fiCvDUdQR1BHUEdQR3BTIygvixoQS14XgTtthLVdpNWwXRLqvQ724LplFRtyrYF0yVpFLQrKRVMh6RZ0I6kkmCqklaCqpKZH0FX56Crq9jVfdDVk0RfFrSgFsxkQVmLcdKCVrKySCrryhPEyYShhzOcrFtG0EoilfHHk1CRU5rF6ZjNZhlVOW6RnMSVyyilKies4pO41diVy8wIujoHXV3FGdMHXTtJKLFYTLhZtq4vC1rwXApCZTIqgR6g1PBMCO9DL3bMMSqBHqDU8EyISDAHiGKvWwcCQG2KgjlAFCDAOhAAap0K5gKLphk8mqJgLrCIgoxRJ4J5wKpJ7gAoMkn5EBXBPGDVJHcAFJmkfIhQcAql1oBpTvTol9gG9pm4RHAKpdaAaU706JfYBvaZuJVgPQrt4sFlnOh5MC/p3lmJYD0K7eLBZZzoeTAv6d5ZnuAYHjpgEOnk5F0ufhG6v1ggOIaHDhhEOjl5l4tfhO4vthLcwAMrFNvLJO5vEwhu4IEViu1lEve3WQmyoihQFBzG/V0CQVYUBYqCw7i/SxTBcpsRbFeIYLnNCLZbCY5b5KAnxRwct8hBj9McZFVMW0ihRNBuFdMWUigRlFaxuQ9WWYjRMTiIe5z0wSoLMToGB3GPsA9aTZIJoB+nRgBnM1tzOkkmgH6cGgGczWzNpzqLx3n/aULJJgezeNw07oxQySbVywKjBOgFRnDs+VEsx8FlgVEC9AIjOPb8KJYjvSzoG7UW1IJaUAtqQS14toLNM5fN5APdwBJA8G83Pk/aK/rgzVvXzeQD3cASQPBvNz5P2ssTzAaGUIrHEO6zI5gNDKEUjyHcxxWkh4Ylcowwk1QQpIeGJXKMMJO0EgwqyjGCioJBJvDrxRMSuVOTJEXfbz1/bHwWtBL0yoQehK6RucgE+bGzanzulQh6E3IgQV+xpc8kcrfuSO7eTfJ3ZYmQw0Oy9azVKOk1C/bJ5D5F38YPeLfx0rjWJxHsS0SqsSYuxySjj5qO5Oj7xQWy2VBtFOwzCy6ryH3YfE3uh64Y1xckgstJPydEjkkeHv07Iy4Xaao15+KCWTBx6M/db+T9xivSErqaJDdzXI6yLRE8Vgg0coex/SPJvT0SbWu0KpZtbgSpCH3NRt7I5OxHkObc6heU+/M/J5vrpBFM5GBLqCQux14COXs5CNXK5OjPGm1tSMrJSOMNYQ4mVTGV/L6zTL7+DovkbFUxbSW0Wo05l8hJWsU+cRWfSh+Mt5Lb1ck/J1TvVsdDaR/MiEni+llsdZuZp62EViu+96bpNjNPWwmtVnzvFd5m9IVVC54x/wA7gNvqFG9vXQAAAABJRU5ErkJggg==) no-repeat 0 0}.uploader-file-actions>span:hover{background-position-x:-21px}.uploader-file-actions .uploader-file-pause{background-position-y:0}.uploader-file-actions .uploader-file-resume{background-position-y:-17px}.uploader-file-actions .uploader-file-retry{background-position-y:-53px}.uploader-file-actions .uploader-file-remove{display:block;background-position-y:-34px}.uploader-list{position:relative}.uploader-list>ul{list-style:none;margin:0;padding:0}.uploader-files{position:relative}.uploader-files>ul{list-style:none;margin:0;padding:0}.uploader{position:relative}.uploader-drop{padding:0;border:none;background-color:unset}.uploader-drop .uploader-btn{padding:0;border:none}.uploader-drop .uploader-btn:hover{background-color:unset}.uploader-list{min-width:300px;width:35%;position:fixed;z-index:2;bottom:60px;right:10px}.uploader-list .uploader-file{height:unset;line-height:normal}\n',document.head.appendChild(ue),{setters:[e=>{s=e.default},e=>{n=e.d,o=e.i,l=e.k,a=e.p,u=e.x,p=e.L,d=e.q,c=e.K,h=e.s,f=e.F,g=e.v,v=e.t,m=e.Q,y=e.bh,b=e.w,x=e.z,S=e.V,w=e.c3,k=e.P,C=e.a9,A=e.aJ,F=e.E,E=e.S,_=e.G,R=e.A,P=e.B,D=e.bX,z=e.N,U=e.c4,T=e.g,O=e.bo,N=e.f,L=e.a,I=e.e,B=e.U,M=e.o,j=e.a0,G=e.$,q=e.bV,J=e.bC,$=e.h,V=e.R,H=e.c2,Q=e.bw,Y=e.W,K=e.a7,W=e.c5,X=e.u,Z=e.c,ee=e.b,te=e.X,ie=e._},e=>{re=e.u,se=e.m},e=>{ne=e._},e=>{oe=e._},e=>{le=e.u},e=>{ae=e.C}],execute:function(){const r=n({name:"ChevronLeft",render:()=>o("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}),ue={name:"Collapse",common:l,self:e=>{const{fontWeight:t,textColor1:i,textColor2:r,textColorDisabled:s,dividerColor:n,fontSize:o}=e;return{titleFontSize:o,titleFontWeight:t,dividerColor:n,titleTextColor:i,titleTextColorDisabled:s,fontSize:o,textColor:r,arrowColor:r,arrowColorDisabled:s,itemMargin:"16px 0 0 0"}}},pe=a("collapse","width: 100%;",[a("collapse-item","\n font-size: var(--n-font-size);\n color: var(--n-text-color);\n transition:\n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n margin: var(--n-item-margin);\n ",[u("disabled",[p("header","cursor: not-allowed;",[p("header-main","\n color: var(--n-title-text-color-disabled);\n "),a("collapse-item-arrow","\n color: var(--n-arrow-color-disabled);\n ")])]),a("collapse-item","margin-left: 32px;"),d("&:first-child","margin-top: 0;"),d("&:first-child >",[p("header","padding-top: 0;")]),u("left-arrow-placement",[p("header",[a("collapse-item-arrow","margin-right: 4px;")])]),u("right-arrow-placement",[p("header",[a("collapse-item-arrow","margin-left: 4px;")])]),p("content-wrapper",[p("content-inner","padding-top: 16px;"),c({duration:"0.15s"})]),u("active",[p("header",[u("active",[a("collapse-item-arrow","transform: rotate(90deg);")])])]),d("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),p("header","\n font-size: var(--n-title-font-size);\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n transition: color .3s var(--n-bezier);\n position: relative;\n padding: 16px 0 0 0;\n color: var(--n-title-text-color);\n cursor: pointer;\n ",[p("header-main","\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n font-weight: var(--n-title-font-weight);\n transition: color .3s var(--n-bezier);\n flex: 1;\n color: var(--n-title-text-color);\n "),p("header-extra","\n display: flex;\n align-items: center;\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n "),a("collapse-item-arrow","\n display: flex;\n transition:\n transform .15s var(--n-bezier),\n color .3s var(--n-bezier);\n font-size: 18px;\n color: var(--n-arrow-color);\n ")])])]),de=Object.assign(Object.assign({},v.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),ce=x("n-collapse"),he=n({name:"Collapse",props:de,setup(e,{slots:t}){const{mergedClsPrefixRef:i,inlineThemeDisabled:r,mergedRtlRef:s}=h(e),n=f(e.defaultExpandedNames),o=g((()=>e.expandedNames)),l=le(o,n),a=v("Collapse","-collapse",pe,ue,e,i);function u(t){const{"onUpdate:expandedNames":i,onUpdateExpandedNames:r,onExpandedNamesChange:s}=e;r&&S(r,t),i&&S(i,t),s&&S(s,t),n.value=t}function p(t){const{onItemHeaderClick:i}=e;i&&S(i,t)}m(ce,{props:e,mergedClsPrefixRef:i,expandedNamesRef:l,slots:t,toggleItem:function(t,i,r){const{accordion:s}=e,{value:n}=l;if(s)t?(u([i]),p({name:i,expanded:!0,event:r})):(u([]),p({name:i,expanded:!1,event:r}));else if(Array.isArray(n)){const e=n.slice(),t=e.findIndex((e=>i===e));~t?(e.splice(t,1),u(e),p({name:i,expanded:!1,event:r})):(e.push(i),u(e),p({name:i,expanded:!0,event:r}))}else u([i]),p({name:i,expanded:!0,event:r})}});const d=y("Collapse",s,i),c=g((()=>{const{common:{cubicBezierEaseInOut:e},self:{titleFontWeight:t,dividerColor:i,titleTextColor:r,titleTextColorDisabled:s,textColor:n,arrowColor:o,fontSize:l,titleFontSize:u,arrowColorDisabled:p,itemMargin:d}}=a.value;return{"--n-font-size":l,"--n-bezier":e,"--n-text-color":n,"--n-divider-color":i,"--n-title-font-size":u,"--n-title-text-color":r,"--n-title-text-color-disabled":s,"--n-title-font-weight":t,"--n-arrow-color":o,"--n-arrow-color-disabled":p,"--n-item-margin":d}})),x=r?b("collapse",void 0,c,e):void 0;return{rtlEnabled:d,mergedTheme:a,mergedClsPrefix:i,cssVars:r?void 0:c,themeClass:null==x?void 0:x.themeClass,onRender:null==x?void 0:x.onRender}},render(){var e;return null===(e=this.onRender)||void 0===e||e.call(this),o("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),fe=n({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup:e=>({onceTrue:w(k(e,"show"))}),render(){return o(F,null,{default:()=>{const{show:e,displayDirective:t,onceTrue:i,clsPrefix:r}=this,s="show"===t&&i,n=o("div",{class:`${r}-collapse-item__content-wrapper`},o("div",{class:`${r}-collapse-item__content-inner`},this.$slots));return s?C(n,[[A,e]]):e?n:null}})}}),ge={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},ve=n({name:"CollapseItem",props:ge,setup(e){const{mergedRtlRef:t}=h(e),i=E(),r=_((()=>{var t;return null!==(t=e.name)&&void 0!==t?t:i})),s=R(ce);s||P("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:n,props:o,mergedClsPrefixRef:l,slots:a}=s,u=g((()=>{const{value:e}=n;if(Array.isArray(e)){const{value:t}=r;return!~e.findIndex((e=>e===t))}if(e){const{value:t}=r;return t!==e}return!0}));return{rtlEnabled:y("Collapse",t,l),collapseSlots:a,randomName:i,mergedClsPrefix:l,collapsed:u,mergedDisplayDirective:g((()=>{const{displayDirective:t}=e;return t||o.displayDirective})),arrowPlacement:g((()=>o.arrowPlacement)),handleClick(t){s&&!e.disabled&&s.toggleItem(u.value,r.value,t)}}},render(){const{collapseSlots:e,$slots:t,arrowPlacement:i,collapsed:s,mergedDisplayDirective:n,mergedClsPrefix:l,disabled:a}=this,u=D(t.header,{collapsed:s},(()=>[this.title])),p=t["header-extra"]||e["header-extra"],d=t.arrow||e.arrow;return o("div",{class:[`${l}-collapse-item`,`${l}-collapse-item--${i}-arrow-placement`,a&&`${l}-collapse-item--disabled`,!s&&`${l}-collapse-item--active`]},o("div",{class:[`${l}-collapse-item__header`,!s&&`${l}-collapse-item__header--active`]},o("div",{class:`${l}-collapse-item__header-main`,onClick:this.handleClick},"right"===i&&u,o("div",{class:`${l}-collapse-item-arrow`,key:this.rtlEnabled?0:1},D(d,{collapsed:s},(()=>{var t;return[o(z,{clsPrefix:l},{default:null!==(t=e.expandIcon)&&void 0!==t?t:()=>this.rtlEnabled?o(r,null):o(ae,null)})]}))),"left"===i&&u),U(p,{collapsed:s},(e=>o("div",{class:`${l}-collapse-item__header-extra`,onClick:this.handleClick},e)))),o(fe,{clsPrefix:l,displayDirective:n,show:!s},t))}});function me(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ye=function e(t,i,r){function s(o,l){if(!i[o]){if(!t[o]){if(!l&&me)return me(o);if(n)return n(o,!0);throw new Error("Cannot find module '"+o+"'")}var a=i[o]={exports:{}};t[o][0].call(a.exports,(function(e){return s(t[o][1][e]||e)}),a,a.exports,e,t,i,r)}return i[o].exports}for(var n=me,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(e,t,i){var r=e("./utils");function s(e,t,i){r.defineNonEnumerable(this,"uploader",e),r.defineNonEnumerable(this,"file",t),r.defineNonEnumerable(this,"bytes",null),this.offset=i,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=r.evalOpts(e.opts.chunkSize,t,this),this.startByte=this.offset*this.chunkSize,this.endByte=this.computeEndByte(),this.xhr=null}var n=s.STATUS={PENDING:"pending",UPLOADING:"uploading",READING:"reading",SUCCESS:"success",ERROR:"error",COMPLETE:"complete",PROGRESS:"progress",RETRY:"retry"};r.extend(s.prototype,{_event:function(e,t){(t=r.toArray(arguments)).unshift(this),this.file._chunkEvent.apply(this.file,t)},computeEndByte:function(){var e=Math.min(this.file.size,(this.offset+1)*this.chunkSize);return this.file.size-e<this.chunkSize&&!this.uploader.opts.forceChunkSize&&(e=this.file.size),e},getParams:function(){return{chunkNumber:this.offset+1,chunkSize:this.chunkSize,currentChunkSize:this.endByte-this.startByte,totalSize:this.file.size,identifier:this.file.uniqueIdentifier,filename:this.file.name,relativePath:this.file.relativePath,totalChunks:this.file.chunks.length}},getTarget:function(e,t){return t.length?(e.indexOf("?")<0?e+="?":e+="&",e+t.join("&")):e},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",s,!1),this.xhr.addEventListener("error",s,!1);var e=r.evalOpts(this.uploader.opts.testMethod,this.file,this),t=this.prepareXhrRequest(e,!0);this.xhr.send(t);var i=this;function s(e){var t=i.status(!0);t===n.ERROR?(i._event(t,i.message()),i.uploader.uploadNextChunk()):t===n.SUCCESS?(i._event(t,i.message()),i.tested=!0):i.file.paused||(i.tested=!0,i.send())}},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(e){this.readState=2,this.bytes=e,this.send()},send:function(){var e=this.uploader.opts.preprocess,t=this.uploader.opts.readFileFn;if(r.isFunction(e))switch(this.preprocessState){case 0:return this.preprocessState=1,void e(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void t(this.file,this.file.fileType,this.startByte,this.endByte,this);case 1:return}if(!this.uploader.opts.testChunks||this.tested){this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",(function(e){e.lengthComputable&&(o.loaded=e.loaded,o.total=e.total),o._event(n.PROGRESS,e)}),!1),this.xhr.addEventListener("load",l,!1),this.xhr.addEventListener("error",l,!1);var i=r.evalOpts(this.uploader.opts.uploadMethod,this.file,this),s=this.prepareXhrRequest(i,!1,this.uploader.opts.method,this.bytes);this.xhr.send(s);var o=this}else this.test();function l(e){var t=o.message();o.processingResponse=!0,o.uploader.opts.processResponse(t,(function(e,t){if(o.processingResponse=!1,o.xhr){o.processedState={err:e,res:t};var i=o.status();if(i===n.SUCCESS||i===n.ERROR)o._event(i,t),i===n.ERROR&&o.uploader.uploadNextChunk();else{o._event(n.RETRY,t),o.pendingRetry=!0,o.abort(),o.retries++;var r=o.uploader.opts.chunkRetryInterval;null!==r?setTimeout((function(){o.send()}),r):o.send()}}}),o.file,o)}},abort:function(){var e=this.xhr;this.xhr=null,this.processingResponse=!1,this.processedState=null,e&&e.abort()},status:function(e){if(1===this.readState)return n.READING;if(this.pendingRetry||1===this.preprocessState)return n.UPLOADING;if(this.xhr){if(this.xhr.readyState<4||this.processingResponse)return n.UPLOADING;var t;this.uploader.opts.successStatuses.indexOf(this.xhr.status)>-1?t=n.SUCCESS:this.uploader.opts.permanentErrors.indexOf(this.xhr.status)>-1||!e&&this.retries>=this.uploader.opts.maxChunkRetries?t=n.ERROR:(this.abort(),t=n.PENDING);var i=this.processedState;return i&&i.err&&(t=n.ERROR),t}return n.PENDING},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var e=this.status();return e===n.SUCCESS||e===n.ERROR?1:e===n.PENDING?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var e=this.endByte-this.startByte;return this.status()!==n.SUCCESS&&(e=this.progress()*e),e},prepareXhrRequest:function(e,t,i,s){var n=r.evalOpts(this.uploader.opts.query,this.file,this,t);n=r.extend(this.getParams(),n),n=this.uploader.opts.processParams(n,this.file,this,t);var o=r.evalOpts(this.uploader.opts.target,this.file,this,t),l=null;if("GET"===e||"octet"===i){var a=[];r.each(n,(function(e,t){a.push([encodeURIComponent(t),encodeURIComponent(e)].join("="))})),o=this.getTarget(o,a),l=s||null}else l=new FormData,r.each(n,(function(e,t){l.append(t,e)})),void 0!==s&&l.append(this.uploader.opts.fileParameterName,s,this.file.name);return this.xhr.open(e,o,!0),this.xhr.withCredentials=this.uploader.opts.withCredentials,r.each(r.evalOpts(this.uploader.opts.headers,this.file,this,t),(function(e,t){this.xhr.setRequestHeader(t,e)}),this),l}}),t.exports=s},{"./utils":5}],2:[function(e,t,i){var r=e("./utils").each,s={_eventData:null,on:function(e,t){this._eventData||(this._eventData={}),this._eventData[e]||(this._eventData[e]=[]);var i=!1;r(this._eventData[e],(function(e){if(e===t)return i=!0,!1})),i||this._eventData[e].push(t)},off:function(e,t){this._eventData||(this._eventData={}),this._eventData[e]&&this._eventData[e].length&&(t?r(this._eventData[e],(function(i,r){if(i===t)return this._eventData[e].splice(r,1),!1}),this):this._eventData[e]=[])},trigger:function(e){if(this._eventData||(this._eventData={}),!this._eventData[e])return!0;var t=this._eventData[e].slice.call(arguments,1),i=!1;return r(this._eventData[e],(function(e){i=!1===e.apply(this,t)||i}),this),!i}};t.exports=s},{"./utils":5}],3:[function(e,t,i){var r=e("./utils"),s=e("./event"),n=e("./file"),o=e("./chunk"),l="undefined"==typeof window,a=!l&&window.navigator.msPointerEnabled,u=function(){if(l)return!1;var e="slice",t=r.isDefined(window.File)&&r.isDefined(window.Blob)&&r.isDefined(window.FileList),i=null;return t&&(i=window.Blob.prototype,r.each(["slice","webkitSlice","mozSlice"],(function(t){if(i[t])return e=t,!1})),t=!!i[e]),t&&(d.sliceName=e),i=null,t}(),p=function(){if(l)return!1;var e=window.document.createElement("input");e.type="file";var t="webkitdirectory"in e||"directory"in e;return e=null,t}();function d(e){this.support=u,this.support&&(this.supportDirectory=p,r.defineNonEnumerable(this,"filePaths",{}),this.opts=r.extend({},d.defaults,e||{}),this.preventEvent=r.bind(this._preventEvent,this),n.call(this,this))}d.version="0.6.0",d.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:function(e,t,i,r,s){s.readFinished(e.file[d.sliceName](i,r,t))},checkChunkUploadedByResponse:null,initialPaused:!1,processResponse:function(e,t){t(null,e)},processParams:function(e){return e}},d.utils=r,d.event=s,d.File=n,d.Chunk=o,d.prototype=r.extend({},n.prototype),r.extend(d.prototype,s),r.extend(d.prototype,{constructor:d,_trigger:function(e){var t=r.toArray(arguments),i=!this.trigger.apply(this,arguments);return"catchAll"!==e&&(t.unshift("catchAll"),i=!this.trigger.apply(this,t)||i),!i},_triggerAsync:function(){var e=arguments;r.nextTick((function(){this._trigger.apply(this,e)}),this)},addFiles:function(e,t){var i=[],s=this.fileList.length;r.each(e,(function(e){if((!a||a&&e.size>0)&&(e.size%4096!=0||"."!==e.name&&"."!==e.fileName)){var r=this.generateUniqueIdentifier(e);if(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(r)){var s=new n(this,e,this);s.uniqueIdentifier=r,this._trigger("fileAdded",s,t)?i.push(s):n.prototype.removeFile.call(this,s)}}}),this);var o=this.fileList.slice(s);this._trigger("filesAdded",i,o,t)?(r.each(i,(function(e){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(e)}),this),this._trigger("filesSubmitted",i,o,t)):r.each(o,(function(e){n.prototype.removeFile.call(this,e)}),this)},addFile:function(e,t){this.addFiles([e],t)},cancel:function(){for(var e=this.fileList.length-1;e>=0;e--)this.fileList[e].cancel()},removeFile:function(e){n.prototype.removeFile.call(this,e),this._trigger("fileRemoved",e)},generateUniqueIdentifier:function(e){var t=this.opts.generateUniqueIdentifier;if(r.isFunction(t))return t(e);var i=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+i.replace(/[^0-9a-zA-Z_-]/gim,"")},getFromUniqueIdentifier:function(e){var t=!1;return r.each(this.files,(function(i){if(i.uniqueIdentifier===e)return t=i,!1})),t},uploadNextChunk:function(e){var t=!1,i=o.STATUS.PENDING,s=this.uploader.opts.checkChunkUploadedByResponse;if(this.opts.prioritizeFirstAndLastChunk&&(r.each(this.files,(function(e){if(!e.paused&&(!s||e._firstResponse||!e.isUploading()))return e.chunks.length&&e.chunks[0].status()===i?(e.chunks[0].send(),t=!0,!1):e.chunks.length>1&&e.chunks[e.chunks.length-1].status()===i?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0})),t))return t;if(r.each(this.files,(function(e){if(!e.paused){if(s&&!e._firstResponse&&e.isUploading())return;r.each(e.chunks,(function(e){if(e.status()===i)return e.send(),t=!0,!1}))}if(t)return!1})),t)return!0;var n=!1;return r.each(this.files,(function(e){if(!e.isComplete())return n=!0,!1})),n||e||!this.files.length||this._triggerAsync("complete"),n},upload:function(e){var t=this._shouldUploadNext();if(!1!==t){!e&&this._trigger("uploadStart");for(var i=!1,r=1;r<=this.opts.simultaneousUploads-t&&((i=this.uploadNextChunk(!e)||i)||!e);r++);i||e||this._triggerAsync("complete")}},_shouldUploadNext:function(){var e=0,t=!0,i=this.opts.simultaneousUploads,s=o.STATUS.UPLOADING;return r.each(this.files,(function(n){return r.each(n.chunks,(function(r){if(r.status()===s&&++e>=i)return t=!1,!1})),t})),t&&e},assignBrowse:function(e,t,i,s){void 0===e.length&&(e=[e]),r.each(e,(function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:((n=document.createElement("input")).setAttribute("type","file"),r.extend(n.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),e.appendChild(n),e.addEventListener("click",(function(t){"label"!==e.tagName.toLowerCase()&&n.click()}),!1)),this.opts.singleFile||i||n.setAttribute("multiple","multiple"),t&&n.setAttribute("webkitdirectory","webkitdirectory"),s&&r.each(s,(function(e,t){n.setAttribute(t,e)}));var o=this;n.addEventListener("change",(function(e){o._trigger(e.type,e),e.target.value&&(o.addFiles(e.target.files,e),e.target.value="")}),!1)}),this)},onDrop:function(e){this._trigger(e.type,e),this.opts.onDropStopPropagation&&e.stopPropagation(),e.preventDefault(),this._parseDataTransfer(e.dataTransfer,e)},_parseDataTransfer:function(e,t){e.items&&e.items[0]&&e.items[0].webkitGetAsEntry?this.webkitReadDataTransfer(e,t):this.addFiles(e.files,t)},webkitReadDataTransfer:function(e,t){var i=this,s=e.items.length,n=[];function o(e){e.readEntries((function(t){t.length?(s+=t.length,r.each(t,(function(e){if(e.isFile){var t=e.fullPath;e.file((function(e){l(e,t)}),a)}else e.isDirectory&&o(e.createReader())})),o(e)):u()}),a)}function l(e,t){e.relativePath=t.substring(1),n.push(e),u()}function a(e){throw e}function u(){0==--s&&i.addFiles(n,t)}r.each(e.items,(function(e){var t=e.webkitGetAsEntry();t?t.isFile?l(e.getAsFile(),t.fullPath):o(t.createReader()):u()}))},_assignHelper:function(e,t,i){void 0===e.length&&(e=[e]);var s=i?"removeEventListener":"addEventListener";r.each(e,(function(e){r.each(t,(function(t,i){e[s](i,t,!1)}),this)}),this)},_preventEvent:function(e){r.preventEvent(e),this._trigger(e.type,e)},assignDrop:function(e){this._onDrop=r.bind(this.onDrop,this),this._assignHelper(e,{dragover:this.preventEvent,dragenter:this.preventEvent,dragleave:this.preventEvent,drop:this._onDrop})},unAssignDrop:function(e){this._assignHelper(e,{dragover:this.preventEvent,dragenter:this.preventEvent,dragleave:this.preventEvent,drop:this._onDrop},!0),this._onDrop=null}}),t.exports=d},{"./chunk":1,"./event":2,"./file":4,"./utils":5}],4:[function(e,t,i){var r=e("./utils"),s=e("./chunk");function n(e,t,i){r.defineNonEnumerable(this,"uploader",e),this.isRoot=this.isFolder=e===this,r.defineNonEnumerable(this,"parent",i||null),r.defineNonEnumerable(this,"files",[]),r.defineNonEnumerable(this,"fileList",[]),r.defineNonEnumerable(this,"chunks",[]),r.defineNonEnumerable(this,"_errorFiles",[]),r.defineNonEnumerable(this,"file",null),this.id=r.uid(),this.isRoot||!t?this.file=null:r.isString(t)?(this.isFolder=!0,this.file=null,this.path=t,this.parent.path&&(t=t.substr(this.parent.path.length)),this.name="/"===t.charAt(t.length-1)?t.substr(0,t.length-1):t):(this.file=t,this.fileType=this.file.type,this.name=t.fileName||t.name,this.size=t.size,this.relativePath=t.relativePath||t.webkitRelativePath||this.name,this._parseFile()),this.paused=e.opts.initialPaused,this.error=!1,this.allError=!1,this.aborted=!1,this.completed=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}r.extend(n.prototype,{_parseFile:function(){var e=function(e){var t=[],i=e.split("/"),r=i.length,s=1;if(i.splice(r-1,1),r--,i.length)for(;s<=r;)t.push(i.slice(0,s++).join("/")+"/");return t}(this.relativePath);if(e.length){var t=this.uploader.filePaths;r.each(e,(function(i,r){var s=t[i];s||(s=new n(this.uploader,i,this.parent),t[i]=s,this._updateParentFileList(s)),this.parent=s,s.files.push(this),e[r+1]||s.fileList.push(this)}),this)}else this._updateParentFileList()},_updateParentFileList:function(e){e||(e=this);var t=this.parent;t&&t.fileList.push(e)},_eachAccess:function(e,t){this.isFolder?r.each(this.files,(function(t,i){return e.call(this,t,i)}),this):t.call(this,this)},bootstrap:function(){if(!this.isFolder){var e=this.uploader.opts;r.isFunction(e.initFileFn)&&e.initFileFn.call(this,this),this.abort(!0),this._resetError(),this._prevProgress=0;for(var t=e.forceChunkSize?Math.ceil:Math.floor,i=Math.max(t(this.size/e.chunkSize),1),n=0;n<i;n++)this.chunks.push(new s(this.uploader,this,n))}},_measureSpeed:function(){var e=this.uploader.opts.speedSmoothingFactor,t=Date.now()-this._lastProgressCallback;if(t){var i=this.sizeUploaded();this.currentSpeed=Math.max((i-this._prevUploadedSize)/t*1e3,0),this.averageSpeed=e*this.currentSpeed+(1-e)*this.averageSpeed,this._prevUploadedSize=i,this.parent&&this.parent._checkProgress()&&this.parent._measureSpeed()}},_checkProgress:function(e){return Date.now()-this._lastProgressCallback>=this.uploader.opts.progressCallbacksInterval},_chunkEvent:function(e,t,i){var r=this.uploader,n=s.STATUS,o=this,l=this.getRoot(),a=function(){o._measureSpeed(),r._trigger("fileProgress",l,o,e),o._lastProgressCallback=Date.now()};switch(t){case n.PROGRESS:this._checkProgress()&&a();break;case n.ERROR:this._error(),this.abort(!0),r._trigger("fileError",l,this,i,e);break;case n.SUCCESS:if(this._updateUploadedChunks(i,e),this.error)return;clearTimeout(this._progeressId),this._progeressId=0;var u=Date.now()-this._lastProgressCallback;u<r.opts.progressCallbacksInterval&&(this._progeressId=setTimeout(a,r.opts.progressCallbacksInterval-u)),this.isComplete()?(clearTimeout(this._progeressId),a(),this.currentSpeed=0,this.averageSpeed=0,r._trigger("fileSuccess",l,this,i,e),l.isComplete()&&r._trigger("fileComplete",l,this)):this._progeressId||a();break;case n.RETRY:r._trigger("fileRetry",l,this,e)}},_updateUploadedChunks:function(e,t){var i=this.uploader.opts.checkChunkUploadedByResponse;if(i){var s=t.xhr;r.each(this.chunks,(function(r){if(!r.tested){var n=i.call(this,r,e);r!==t||n||(r.xhr=null),n&&(r.xhr=s),r.tested=!0}}),this),this._firstResponse?this.uploader.uploadNextChunk():(this._firstResponse=!0,this.uploader.upload(!0))}else this.uploader.uploadNextChunk()},_error:function(){this.error=this.allError=!0;for(var e=this.parent;e&&e!==this.uploader;)e._errorFiles.push(this),e.error=!0,e._errorFiles.length===e.files.length&&(e.allError=!0),e=e.parent},_resetError:function(){this.error=this.allError=!1;for(var e=this.parent,t=-1;e&&e!==this.uploader;)t=e._errorFiles.indexOf(this),e._errorFiles.splice(t,1),e.allError=!1,e._errorFiles.length||(e.error=!1),e=e.parent},isComplete:function(){if(!this.completed){var e=!1;this._eachAccess((function(t){if(!t.isComplete())return e=!0,!1}),(function(){if(this.error)e=!0;else{var t=s.STATUS;r.each(this.chunks,(function(i){var r=i.status();if(r===t.ERROR||r===t.PENDING||r===t.UPLOADING||r===t.READING||1===i.preprocessState||1===i.readState)return e=!0,!1}))}})),this.completed=!e}return this.completed},isUploading:function(){var e=!1;return this._eachAccess((function(t){if(t.isUploading())return e=!0,!1}),(function(){var t=s.STATUS.UPLOADING;r.each(this.chunks,(function(i){if(i.status()===t)return e=!0,!1}))})),e},resume:function(){this._eachAccess((function(e){e.resume()}),(function(){this.paused=!1,this.aborted=!1,this.uploader.upload()})),this.paused=!1,this.aborted=!1},pause:function(){this._eachAccess((function(e){e.pause()}),(function(){this.paused=!0,this.abort()})),this.paused=!0},cancel:function(){this.uploader.removeFile(this)},retry:function(e){e?e.bootstrap():this._eachAccess((function(e){e.error&&e.bootstrap()}),(function(){this.bootstrap()})),this.uploader.upload()},abort:function(e){if(!this.aborted){this.currentSpeed=0,this.averageSpeed=0,this.aborted=!e;var t=this.chunks;e&&(this.chunks=[]);var i=s.STATUS.UPLOADING;r.each(t,(function(e){e.status()===i&&(e.abort(),this.uploader.uploadNextChunk())}),this)}},progress:function(){var e=0,t=0,i=0;return this._eachAccess((function(r,s){e+=r.progress()*r.size,t+=r.size,s===this.files.length-1&&(i=t>0?e/t:this.isComplete()?1:0)}),(function(){if(this.error)i=1;else{if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),void(i=this._prevProgress);var e=0;r.each(this.chunks,(function(t){e+=t.progress()*(t.endByte-t.startByte)}));var t=e/this.size;this._prevProgress=Math.max(this._prevProgress,t>.9999?1:t),i=this._prevProgress}})),i},getSize:function(){var e=0;return this._eachAccess((function(t){e+=t.size}),(function(){e+=this.size})),e},getFormatSize:function(){var e=this.getSize();return r.formatSize(e)},getRoot:function(){if(this.isRoot)return this;for(var e=this.parent;e;){if(e.parent===this.uploader)return e;e=e.parent}return this},sizeUploaded:function(){var e=0;return this._eachAccess((function(t){e+=t.sizeUploaded()}),(function(){r.each(this.chunks,(function(t){e+=t.sizeUploaded()}))})),e},timeRemaining:function(){var e=0,t=0,i=0;return this._eachAccess((function(s,n){s.paused||s.error||(t+=s.size-s.sizeUploaded(),i+=s.averageSpeed),n===this.files.length-1&&(e=r(t,i))}),(function(){if(this.paused||this.error)e=0;else{var t=this.size-this.sizeUploaded();e=r(t,this.averageSpeed)}})),e;function r(e,t){return e&&!t?Number.POSITIVE_INFINITY:e||t?Math.floor(e/t):0}},removeFile:function(e){if(e.isFolder)for(;e.files.length;){var t=e.files[e.files.length-1];this._removeFile(t)}this._removeFile(e)},_delFilePath:function(e){e.path&&this.filePaths&&delete this.filePaths[e.path],r.each(e.fileList,(function(e){this._delFilePath(e)}),this)},_removeFile:function(e){if(!e.isFolder){r.each(this.files,(function(t,i){if(t===e)return this.files.splice(i,1),!1}),this),e.abort();for(var t,i=e.parent;i&&i!==this;)t=i.parent,i._removeFile(e),i=t}e.parent===this&&r.each(this.fileList,(function(t,i){if(t===e)return this.fileList.splice(i,1),!1}),this),this.isRoot||!this.isFolder||this.files.length||(this.parent._removeFile(this),this.uploader._delFilePath(this)),e.parent=null},getType:function(){return this.isFolder?"folder":this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.isFolder?"":this.name.substr(2+(~-this.name.lastIndexOf(".")>>>0)).toLowerCase()}}),t.exports=n},{"./chunk":1,"./utils":5}],5:[function(e,t,i){var r=Object.prototype,s=Array.prototype,n=r.toString,o=function(e){return"[object Function]"===n.call(e)},l=Array.isArray||function(e){return"[object Array]"===n.call(e)},a=function(e){return"[object Object]"===n.call(e)&&Object.getPrototypeOf(e)===r},u=0,p={uid:function(){return++u},noop:function(){},bind:function(e,t){return function(){return e.apply(t,arguments)}},preventEvent:function(e){e.preventDefault()},stop:function(e){e.preventDefault(),e.stopPropagation()},nextTick:function(e,t){setTimeout(p.bind(e,t),0)},toArray:function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=e.length),s.slice.call(e,t,i)},isPlainObject:a,isFunction:o,isArray:l,isObject:function(e){return Object(e)===e},isString:function(e){return"string"==typeof e},isUndefined:function(e){return void 0===e},isDefined:function(e){return void 0!==e},each:function(e,t,i){if(p.isDefined(e.length))for(var r=0,s=e.length;r<s&&!1!==t.call(i,e[r],r,e);r++);else for(var n in e)if(!1===t.call(i,e[n],n,e))break},evalOpts:function(e,t){return p.isFunction(e)&&(t=p.toArray(arguments),e=e.apply(null,t.slice(1))),e},extend:function(){var e,t,i,r,s,n,u=arguments[0]||{},d=1,c=arguments.length,h=!1;for("boolean"==typeof u&&(h=u,u=arguments[1]||{},d++),"object"==typeof u||o(u)||(u={}),d===c&&(u=this,d--);d<c;d++)if(null!=(e=arguments[d]))for(t in e)i=u[t],u!==(r=e[t])&&(h&&r&&(a(r)||(s=l(r)))?(s?(s=!1,n=i&&l(i)?i:[]):n=i&&a(i)?i:{},u[t]=p.extend(h,n,r)):void 0!==r&&(u[t]=r));return u},formatSize:function(e){return e<1024?e.toFixed(0)+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},defineNonEnumerable:function(e,t,i){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:i})}};t.exports=p},{}]},{},[3])(3);
/*!
             * Uploader - Uploader library implements html5 file upload and provides multiple simultaneous, stable, fault tolerant and resumable uploads
             * @version v0.6.0
             * @author dolymood <dolymood@gmail.com>
             * @link https://github.com/simple-uploader/Uploader
             * @license MIT
             */function be(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const xe={name:"uploader-btn",props:{directory:{type:Boolean,default:!1},single:{type:Boolean,default:!1},attrs:{type:Object,default:()=>({})}},setup(e){const t=f(null),i=R("uploader"),r=i.support;return I((()=>{B((()=>{i.assignBrowse(t.value,e.directory,e.single,e.attrs)}))})),{btn:t,support:r}}},Se={class:"uploader-btn",ref:"btn"};xe.render=function(e,t,i,r,s,n){return C((M(),T("label",Se,[O(e.$slots,"default")],512)),[[A,r.support]])};const we={name:"uploader-drop",setup(){const e=R("uploader");let t=f(null),i=f("");const r=e.support,s=()=>{i="uploader-dragover"},n=()=>{i=""},o=()=>{i="uploader-droped"};return B((()=>{const i=t.value;e.assignDrop(i),e.on("dragenter",s),e.on("dragleave",n),e.on("drop",o)})),j((()=>{const i=t.value;e.off("dragenter",s),e.off("dragleave",n),e.off("drop",o),e.unAssignDrop(i)})),{drop:t,dropClass:i,support:r,onDragEnter:s,onDragLeave:n,onDrop:o}},render:function(e,t,i,r,s,n){return C((M(),T("div",{class:["uploader-drop",r.dropClass],ref:"drop"},[O(e.$slots,"default")],2)),[[A,r.support]])}},ke={name:"uploader-unsupport",setup:()=>({support:R("uploader").support})},Ce={class:"uploader-unsupport"},Ae=N("p",null,[L(" Your browser, unfortunately, is not supported by Uploader.js. The library requires support for "),N("a",{href:"http://www.w3.org/TR/FileAPI/"},"the HTML5 File API"),L(" along with "),N("a",{href:"http://www.w3.org/TR/FileAPI/#normalization-of-params"},"file slicing"),L(". ")],-1);ke.render=function(e,t,i,r,s,n){return C((M(),T("div",Ce,[O(e.$slots,"default",{},(()=>[Ae]))],512)),[[A,!r.support]])};const Fe=["fileProgress","fileSuccess","fileComplete","fileError"],Ee={name:"uploader-file",props:{file:{type:Object,default:()=>({})},list:{type:Boolean,default:!1}},setup(e){const t=K();let i={},r=0;const s=f(null),n=f(!1),o=f(!1),l=f(0),a=f(0),u=f(!1),p=f(!1),d=f(0),c=f(""),h=f(0),v=f(0),m=f(0),y=f(""),b=f(""),x=f(""),S=g((()=>{let t=e.file.isFolder?"folder":"unknown";const i=e.file.uploader.opts.categoryMap||{image:["gif","jpg","jpeg","png","bmp","webp"],video:["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"],audio:["mp3","wav","wma","ogg","aac","flac"],document:["doc","txt","docx","pages","epub","pdf","numbers","csv","xls","xlsx","keynote","ppt","pptx"]};return Object.keys(i).forEach((e=>{i[e].indexOf(b.value)>-1&&(t=e)})),t})),w=g((()=>{v.value=Math.floor(100*v.value);const e=`translateX(${Math.floor(v.value-100)}%)`;return{progress:`${v.value}%`,webkitTransform:e,mozTransform:e,msTransform:e,transform:e}})),k=g((()=>`${ye.utils.formatSize(l.value)} / s`)),C=g((()=>{let e=o;return u.value?"success":e.value?"error":p.value?"uploading":n.value?"paused":"waiting"})),A=g((()=>{const t=e.file.uploader.fileStatusText;let i=C.value;return i="function"==typeof t?t(C.value,s.value):t[C.value],i||C})),F=g((()=>{const t=e.file;if(m.value===Number.POSITIVE_INFINITY||0===m.value)return"";let i=function(e){const t=Math.floor(e/31536e3);if(t)return t+" year"+o(t);const i=Math.floor((e%=31536e3)/86400);if(i)return i+" day"+o(i);const r=Math.floor((e%=86400)/3600);if(r)return r+" hour"+o(r);const s=Math.floor((e%=3600)/60);if(s)return s+" minute"+o(s);const n=e%60;return n+" second"+o(n);function o(e){return e>1?"s":""}}(m.value);const r=t.uploader.opts.parseTimeRemaining;return r&&(i=r(m.value,i)),i})),E=()=>{n.value=e.file.paused,o.value=e.file.error,p.value=e.file.isUploading()},_=e=>{let t=e;try{t=JSON.parse(e)}catch(i){}s.value=t},R=(i,r)=>{const s=r[0],n=r[1],o=e.list?s:n;if(JSON.stringify(e.file)===JSON.stringify(o)){if(e.list&&"fileSuccess"===i)return void _(r[2]);t.setupState[i](...r)}},P=()=>{v.value=e.file.progress(),l.value=e.file.averageSpeed,a.value=e.file.currentSpeed,m.value=e.file.timeRemaining(),h.value=e.file.sizeUploaded(),E()},D=(e,t,i)=>{e&&_(i),P(),o.value=!1,u.value=!0,p.value=!1};return G(C,((e,t)=>{t&&"uploading"===e&&"uploading"!==t?r=setTimeout((()=>{x.value="uploader-file-progressing"}),200):(clearTimeout(r),x.value="")})),I((()=>{n.value=e.file.paused,o.value=e.file.error,l.value=e.file.averageSpeed,a.value=e.file.currentSpeed,u.value=e.file.isComplete(),p.value=e.file.isUploading(),d.value=e.file.getSize(),c.value=e.file.getFormatSize(),h.value=e.file.sizeUploaded(),v.value=e.file.progress(),m.value=e.file.timeRemaining(),y.value=e.file.getType(),b.value=e.file.getExtension(),Fe.forEach((t=>{e.file.uploader.on(t,(e=>(i[e]=(...t)=>{R(e,t)},i[e]))(t))}))})),q((()=>{Fe.forEach((t=>{e.file.uploader.off(t,i[t])})),i=null})),{response:s,paused:n,error:o,averageSpeed:l,currentSpeed:a,isComplete:u,isUploading:p,size:d,formatedSize:c,uploadedSize:h,progress:v,timeRemaining:m,type:y,extension:b,progressingClass:x,fileCategory:S,progressStyle:w,formatedAverageSpeed:k,status:C,statusText:A,formatedTimeRemaining:F,actionCheck:E,pause:()=>{e.file.pause(),E(),P()},resume:()=>{e.file.resume(),E()},remove:()=>{e.file.cancel()},retry:()=>{e.file.retry(),E()},processResponse:_,fileEventsHandler:R,fileProgress:P,fileSuccess:D,fileComplete:()=>{D()},fileError:(e,t,i)=>{P(),_(i),o.value=!0,u.value=!1,p.value=!1}}}},_e={class:"uploader-file-info"},Re={class:"uploader-file-name"},Pe={class:"uploader-file-size"},De=N("div",{class:"uploader-file-meta"},null,-1),ze={class:"uploader-file-status"},Ue={class:"uploader-file-actions"};Ee.render=function(e,t,i,r,s,n){return M(),T("div",{class:"uploader-file",status:r.status},[O(e.$slots,"default",{file:i.file,list:i.list,status:r.status,paused:r.paused,error:r.error,response:r.response,averageSpeed:r.averageSpeed,formatedAverageSpeed:r.formatedAverageSpeed,currentSpeed:r.currentSpeed,isComplete:r.isComplete,isUploading:r.isUploading,size:r.size,formatedSize:r.formatedSize,uploadedSize:r.uploadedSize,progress:r.progress,progressStyle:r.progressStyle,progressingClass:r.progressingClass,timeRemaining:r.timeRemaining,formatedTimeRemaining:r.formatedTimeRemaining,type:r.type,extension:r.extension,fileCategory:r.fileCategory},(()=>[N("div",{class:["uploader-file-progress",r.progressingClass],style:r.progressStyle},null,6),N("div",_e,[N("div",Re,[N("i",{class:"uploader-file-icon",icon:r.fileCategory},null,8,["icon"]),L(J(i.file.name),1)]),N("div",Pe,J(r.formatedSize),1),De,N("div",ze,[C(N("span",null,J(r.statusText),513),[[A,"uploading"!==r.status]]),C(N("span",null,[N("span",null,J(r.progressStyle.progress)+" ",1),N("em",null,J(r.formatedAverageSpeed)+" ",1),N("i",null,J(r.formatedTimeRemaining),1)],512),[[A,"uploading"===r.status]])]),N("div",Ue,[N("span",{class:"uploader-file-pause",onClick:t[1]||(t[1]=(...e)=>r.pause&&r.pause(...e))}),N("span",{class:"uploader-file-resume",onClick:t[2]||(t[2]=(...e)=>r.resume&&r.resume(...e))},"️"),N("span",{class:"uploader-file-retry",onClick:t[3]||(t[3]=(...e)=>r.retry&&r.retry(...e))}),N("span",{class:"uploader-file-remove",onClick:t[4]||(t[4]=(...e)=>r.remove&&r.remove(...e))})])])]))],8,["status"])};const Te={name:"uploader-list",components:{UploaderFile:Ee},setup:()=>({fileList:R("uploader").fileList})},Oe={class:"uploader-list"};Te.render=function(e,t,i,r,s,n){const o=$("uploader-file");return M(),T("div",Oe,[O(e.$slots,"default",{fileList:r.fileList},(()=>[N("ul",null,[(M(!0),T(V,null,H(r.fileList,(e=>(M(),T("li",{key:e.id},[N(o,{file:e,list:!0},null,8,["file"])])))),128))])]))])};const Ne={name:"uploader-files",components:{UploaderFile:Ee},setup:()=>({files:R("uploader").files})},Le={class:"uploader-files"};Ne.render=function(e,t,i,r,s,n){const o=$("uploader-file");return M(),T("div",Le,[O(e.$slots,"default",{files:r.files},(()=>[N("ul",null,[(M(!0),T(V,null,H(r.files,(e=>(M(),T("li",{key:e.id},[N(o,{file:e},null,8,["file"])])))),128))])]))])};const Ie={name:"uploader",props:{options:{type:Object,default:()=>({})},autoStart:{type:Boolean,default:!0},fileStatusText:{type:[Object,Function],default:()=>({success:"success",error:"error",uploading:"uploading",paused:"paused",waiting:"waiting"})}},setup(e,{emit:t}){const i=f(null),r=f(!1),s=f([]),n=f([]),o=K();let l=new ye(e.options);const a=e=>{const i=Q(e);if(t(be("fileAdded"),i),i.ignored)return!1},u=(e,i)=>{if(t(be("filesAdded"),e,i),e.ignored||i.ignored)return!1},p=e=>{s.value=l.files,n.value=l.fileList},d=(t,i)=>{s.value=l.files,n.value=l.fileList,e.autoStart&&l.upload()},c=(...e)=>{const i=e[0],r={fileAdded:!0,filesAdded:!0,uploadStart:"uploadStart"}[i];if(r){if(!0===r)return;o.setupState[r](...e.slice(1))}e[0]=be(i),t(...e)};return e.options.initialPaused=!e.autoStart,l.fileStatusText=e.fileStatusText,l.on("catchAll",c),l.on("fileAdded",a),l.on("filesAdded",u),l.on("fileRemoved",p),l.on("filesSubmitted",d),q((()=>{l.off("catchAll",c),l.off("fileAdded",a),l.off("filesAdded",u),l.off("fileRemoved",p),l.off("filesSubmitted",d),l=null})),m("uploader",Q(l)),{uploader:l,started:r,files:s,fileList:n,uploadStart:()=>{r.value=!0},fileAdded:a,filesAdded:u,fileRemoved:p,filesSubmitted:d,allEvent:c,uploaderList:i}},components:{UploaderBtn:xe,UploaderDrop:we,UploaderUnsupport:ke,UploaderList:Te,UploaderFiles:Ne,UploaderFile:Ee}},Be={class:"uploader"},Me=N("p",null,"Drop files here to upload or",-1),je=L("select files"),Ge=L("select folder");Ie.render=function(e,t,i,r,s,n){const o=$("uploader-unsupport"),l=$("uploader-btn"),a=$("uploader-drop"),u=$("uploader-list");return M(),T("div",Be,[O(e.$slots,"default",{files:r.files,fileList:r.fileList,started:r.started},(()=>[N(o),N(a,null,{default:Y((()=>[Me,N(l,null,{default:Y((()=>[je])),_:1}),N(l,{directory:!0},{default:Y((()=>[Ge])),_:1})])),_:1}),N(u)]))])};const qe={version:"1.0.0-beta.5",install:function(e,t){e.component(Ie.name,Ie),e.component(xe.name,xe),e.component(we.name,we),e.component(ke.name,ke),e.component(Te.name,Te),e.component(Ne.name,Ne),e.component(Ee.name,Ee)},Uploader:Ie,UploaderBtn:xe,UploaderDrop:we,UploaderUnsupport:ke,UploaderList:Te,UploaderFiles:Ne,UploaderFile:Ee};console.log(qe);const Je=31457280,$e={components:qe,props:{uploadData:{type:Object,required:!1,default:()=>{}},uploadSuccess:{type:Function,required:!1,default:()=>{}},hideList:{type:Boolean,default:!1}},data(){return{fileInput:null,options:{target:W,testChunks:!0,uploadMethod:"post",chunkSize:Je,simultaneousUploads:2,query:(e,t,r)=>i({},this.uploadData),headers:{Authorization:`Bearer ${X().token}`},checkChunkUploadedByResponse:(e,t)=>{console.log("chunk",e);let i=JSON.parse(t);if(200!==i.code)throw new Error(i);let r=i.data;return!0===r.uploaded?r.uploaded:(r.uploadedChunks||[]).indexOf(e.offset+1)>=0},parseTimeRemaining:function(e,t){return t.replace(/\syears?/,"年").replace(/\days?/,"天").replace(/\shours?/,"小时").replace(/\sminutes?/,"分钟").replace(/\sseconds?/,"秒")}},fileStatusTextObj:{success:"上传成功",error:"上传错误",uploading:"正在上传",paused:"停止上传",waiting:"等待中"},uploadFileList:[]}},mounted(){this.$nextTick((()=>{this.fileInput=document.querySelector(".uploader-btn input[type='file']")}))},methods:{uploadBtnHandler(e){e.target&&"INPUT"===e.target.tagName||(e.stopPropagation(),console.log(1))},onFileAdded(t,r){var s=this;console.log("eeeee",r),console.log("file :>> ",t),console.log("文件类型："+t.fileType+"，文件大小："+t.size+"B"),console.log("校验MD5"),this.getFileMD5(t,function(){var r,n=(r=function*(e){if(""!==e){t.uniqueIdentifier=e;const r=i(i({},s.uploadData),{},{identifier:e,filename:t.name,uploadBefore:!0});re(r).then((()=>{s.uploadFileList.push(t),t.resume()})).catch((()=>{console.log("取消文件上传"),t.error=!0,t.cancel()}))}},function(){var t=this,i=arguments;return new Promise((function(s,n){var o=r.apply(t,i);function l(t){e(o,s,n,l,a,"next",t)}function a(t){e(o,s,n,l,a,"throw",t)}l(void 0)}))});return function(e){return n.apply(this,arguments)}}())},onFileSuccess(e,t,r,s){se(i(i({},this.uploadData),{},{identifier:e.uniqueIdentifier,filename:t.name})).then((i=>{console.log("上传成功",e,t,r,s),window.$message.success(i.msg),this.uploadSuccess()})).catch((e=>{t.error=!0,t.cancel()}))},onFileError(e,t,i,r){console.log("上传出错：",e,t,i,r);const s=JSON.parse(i);window.$message.error(s.msg)},onFileProgress(e,t,i){console.log(`当前进度：${Math.ceil(100*t._prevProgress)}%`)},getFileMD5(e,t){e.pause();let i=new SparkMD5.ArrayBuffer,r=new FileReader,s=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,n=0,o=Math.ceil(e.size/Je),l=(new Date).getTime();function a(){const t=n*Je,i=t+Je>=e.size?e.size:t+Je;r.readAsArrayBuffer(s.call(e.file,t,i))}a(),r.onload=function(e){if(i.append(e.target.result),n<o)n++,a();else{let e=i.end();console.log(`MD5计算完毕：${e}，耗时：${(new Date).getTime()-l} ms.`),t(e)}},r.onerror=function(){window.$message.error("文件读取错误"),e.cancel()}},fileStatusText(e,t){return"md5"===e?"校验MD5":this.fileStatusTextObj[e]},pause(e){console.log("file :>> ",e),e.paused?e.resume():e.pause()},remove(e){this.uploadFileList.forEach(((t,i)=>{t.id===e.id&&this.$nextTick((()=>{this.uploadFileList.splice(i,1)}))})),e.cancel()},showDetail(e){let t=e.file.name,i=e.isComplete?"":` 剩余时间:${e.formatedTimeRemaining}`;return e.error?`${t} \t 上传失败`:`${t} \t ${i}`},showSpeed:e=>`${e.isComplete?"":` ${e.formatedAverageSpeed}`}`,percentage(e){let t=e.progress;return t-1<0?0:t},progressColor:e=>(console.log(e),e.isComplete?"#18A058":e.error?"#D03050":"#2684FE"),download(e,t){console.log("file:>> ",e),window.location.href=`/fileStorage/download/${e.uniqueIdentifier}`},formatFileSize(e,t=2){if(0===e)return"0 B";let i=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,i)).toFixed(t))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}}},Ve={key:0,class:"no-file"},He=ee("i",{class:"icon icon-empty-file"},null,-1),Qe={style:{display:"flex","align-items":"center",height:"100%"}},Ye={style:{width:"100%","margin-right":"10px"}},Ke={style:{display:"flex","align-items":"center"}},We={style:{flex:"none"}},Xe={style:{flex:"none"}};t("_",ne($e,[["render",function(e,t,i,r,n,o){const l=$("uploader-unsupport"),a=$("uploader-btn"),u=$("uploader-drop"),p=oe,d=s,c=ie,h=$("uploader-file"),f=ve,g=he,v=$("uploader-list"),m=$("uploader");return M(),T(m,{ref:"uploader",options:e.options,"auto-start":!1,"file-status-text":o.fileStatusText,onFileAdded:o.onFileAdded,onFileSuccess:o.onFileSuccess,onFileError:o.onFileError,onFileProgress:o.onFileProgress},{default:Y((()=>[N(l),N(u,null,{default:Y((()=>[N(a,{onClick:o.uploadBtnHandler},{default:Y((()=>[O(e.$slots,"default",{},(()=>[L("上传")]))])),_:3},8,["onClick"])])),_:3}),!1===i.hideList?(M(),T(v,{key:0,class:"uploader-list"},{default:Y((()=>[N(g,{accordion:"","default-expanded-names":["1"]},{default:Y((()=>[N(f,{title:"文件列表",name:"1"},{default:Y((()=>[e.uploadFileList.length?(M(!0),Z(V,{key:1},H(e.uploadFileList,(e=>(M(),T(h,{key:e.id,file:e,list:!0},{default:Y((t=>[ee("div",Qe,[ee("div",Ye,[ee("div",null,J(o.showDetail(t)),1),ee("div",Ke,[ee("span",We,J(o.showSpeed(t)),1),N(p,{style:{margin:"5px"},type:"line","indicator-placement":"inside","stroke-width":18,format:"e => showDetail(e,props)",percentage:o.percentage(t),color:o.progressColor(t)},null,8,["percentage","color"]),ee("span",Xe,J(t.formatedSize),1)])]),t.paused||t.isUploading?(M(),T(c,{key:0,circle:"",tertiary:"",onClick:t=>o.pause(e)},{icon:Y((()=>[N(d,{name:e.paused?"fa-circle-play":"fa-circle-pause"},null,8,["name"])])),_:2},1032,["onClick"])):te("",!0),N(c,{circle:"",tertiary:"",onClick:t=>o.remove(e)},{icon:Y((()=>[N(d,{name:"fa-circle-xmark"})])),_:2},1032,["onClick"])])])),_:2},1032,["file"])))),128)):(M(),Z("div",Ve,[He,L(" 暂无待上传文件 ")]))])),_:1})])),_:1})])),_:1})):te("",!0)])),_:3},8,["options","file-status-text","onFileAdded","onFileSuccess","onFileError","onFileProgress"])}]]))}}}))}();
