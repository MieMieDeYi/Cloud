import{d as ee,F as oe,e as te,bw as V,cb as ne,cf as le,cg as se,ch as ae,ci as ie,cj as ue,ck as re,cl as de,cm as ce,cn as pe,c as p,f as s,co as me,bz as t,W as i,b as a,R as w,c2 as $,bF as _e,A as fe,ce as ve,Y as ye,cp as he,o as u,g as I,bC as r,a9 as ge,X as P,a as d,bx as ke,by as be}from"./index.6d4055d0.js";import xe from"./YPopup.52ef8129.js";import we from"./YIcon.481673e0.js";import{a as Ce}from"./common.d861a2fb.js";import{s as Fe}from"./temp.f71b06cc.js";import{A as C,a as De}from"./Explore.5bdeed77.js";import{b as Ee,s as n,i as Be,a as Ae}from"./index.f2ccf14d.js";import{_ as Ve}from"./_plugin-vue_export-helper.cdc0426e.js";const F=h=>(ke("data-v-6694c3cd"),h=h(),be(),h),$e={class:"resource-list"},Ie={class:"resource-cell"},Pe={class:"cell-title"},Se={style:{"font-size":"1.2rem",color:"#696969"}},Ue=["onClick"],ze=["href"],Ye={key:0,class:"share-box"},Me={style:{margin:"20px 0"}},Re=F(()=>a("br",null,null,-1)),He={style:{"text-align":"center"}},Ne={style:{"text-align":"right"}},qe={key:1,class:"share-box"},Le={style:{display:"flex","align-items":"center","margin-bottom":"10px"}},Te=F(()=>a("span",{style:{flex:"none"}},"\u52A0\u5BC6\u5206\u4EAB\uFF1A",-1)),je=F(()=>a("div",null," \u5230\u671F\u65F6\u95F4\uFF08\u4E0D\u9009\u62E9\u8868\u793A\u6C38\u4E45\uFF09\uFF1A ",-1)),We={style:{width:"100%",display:"flex","flex-direction":"row-reverse"}},Xe={style:{"text-align":"right"}},Ge=ee({__name:"Explorer-m",setup(h){const{explorerPath:g,fileList:S,clickFile:m,renameDialog:_,intoPath:k,calcSize:U,refresh:z,renameHandler:Y}=Ee.setup(),D=_e(),M=ye(),R=oe("\u672C\u5730\u5B58\u50A8"),E=fe("setRefresh");E&&E(k),te(()=>{g.value=D.query.path?D.query.path.split("/"):[],k(null)});const f=V({visible:!1,url:""}),v=V({visible:!1,actions:[{name:"\u4E0B\u8F7D",key:"download",icon:"fa-circle-down",action:l=>{C.download(l.id,!1).then(o=>{f.url=o,f.visible=!0})}},{name:"\u5206\u4EAB",key:"share",icon:"fa-square-up-right",action(l){n.visible=!0,n.form.resourceIds=l.id+""}},{name:"\u590D\u5236",key:"copy",icon:"fa-copy"},{name:"\u590D\u5236\u526F\u672C",key:"dumplicate",icon:"fa-clone"},{name:"\u79FB\u52A8",key:"move",icon:"fa-file-export"},{name:"\u5220\u9664",key:"delete",icon:"fa-trash-can",action:l=>{he("\u786E\u5B9A\u5220\u9664\u5417").then(o=>{o==="confirm"&&C.deleteFile(l.id).then(()=>{window.$message.success("\u5220\u9664\u8D44\u6E90\u6210\u529F"),z()})})}},{name:"\u91CD\u547D\u540D",key:"rename",icon:"fa-file-pen",action:l=>{_.value=l.name,_.visible=!0}}]}),H=function(l){l.type==="dir"?k({path:l.name,parentId:l.id}):C.preview(l.id).then(o=>{Fe().setResource({...l,url:o}),M.push({name:"Preview",params:{id:l.id}})})},N=function(l,o){if(l!=="confirm"){o();return}Y(m.value).then(()=>{o()})},q=function(l,o){m.value=o,v.visible=!0,l.stopPropagation()},L=l=>{!m.value||(l.action&&l.action(m.value),v.visible=!1)},T=async function(){await De(n.url),window.$message.success("\u590D\u5236\u6210\u529F")};return(l,o)=>{var A;const j=ne,y=le,W=ve,b=we,X=se,G=xe,x=ae,B=ie,J=ue,K=re,O=de,Q=ce,Z=pe;return u(),p("div",null,[s(W,{class:"cloud-header",title:t(g).length>0?t(g).slice(-1)[0]:R.value},me({_:2},[t(g).length>0?{name:"left",fn:i(()=>[s(y,{round:"",text:"",color:"transparent","text-color":"#fff",style:{"margin-right":"10px"},onClick:o[0]||(o[0]=e=>t(k)(-1))},{default:i(()=>[s(j,{name:"chevron-left",size:24})]),_:1})]),key:"0"}:void 0]),1032,["title"]),a("div",$e,[(u(!0),p(w,null,$(t(S),e=>(u(),I(X,{key:e.id,title:e.name,border:"",onClick:c=>H(e)},{default:i(()=>[a("div",Ie,[s(b,{name:t(Ce)(e.type),color:e.type==="dir"?"#E66E05":"#333",size:30,style:{flex:"0 0 30px"}},null,8,["name","color"]),a("div",null,[a("div",Pe,r(e.name),1),a("div",Se,r(new Date(e.updateTime).format())+" "+r(e.type==="dir"?"":"- "+t(U)(e.size)),1)]),s(b,{name:"fa-ellipsis",size:20,style:{flex:"0 0 20px"},onClick:c=>q(c,e)},null,8,["onClick"])])]),_:2},1032,["title","onClick"]))),128))]),s(G,{show:v.visible,"onUpdate:show":o[1]||(o[1]=e=>v.visible=e),position:"bottom",title:(A=t(m))==null?void 0:A.name},{default:i(()=>[(u(!0),p(w,null,$(v.actions,e=>{var c;return u(),p(w,{key:e.key},[((c=t(m))==null?void 0:c.dir)==!1||e.key!=="download"?ge((u(),p("div",{key:0,class:"sheet-cell",onClick:Je=>L(e)},[s(b,{name:e.icon,size:22,style:{"margin-right":"10px",width:"30px"}},null,8,["name"]),a("span",null,r(e.name),1)],8,Ue)),[[Z]]):P("",!0)],64)}),128))]),_:1},8,["show","title"]),s(B,{show:t(_).visible,"onUpdate:show":o[3]||(o[3]=e=>t(_).visible=e),"close-on-click-overlay":!1,onBeforeClose:N},{title:i(()=>[d(" \u91CD\u547D\u540D ")]),default:i(()=>[s(x,{modelValue:t(_).value,"onUpdate:modelValue":o[2]||(o[2]=e=>t(_).value=e),placeholder:"\u8BF7\u8F93\u5165\u65B0\u540D\u79F0",maxlength:20},null,8,["modelValue"])]),_:1},8,["show"]),s(B,{show:f.visible,"onUpdate:show":o[4]||(o[4]=e=>f.visible=e),"close-on-click-overlay":!1,"cancel-button":!1,"message-align":"center"},{title:i(()=>[d(" \u8D44\u6E90\u4E0B\u8F7D ")]),default:i(()=>[a("a",{href:f.url,style:{"text-decoration":"underline"},target:"_blank"},"\u70B9\u6211\u4E0B\u8F7D",8,ze)]),_:1},8,["show"]),s(Q,{show:t(n).visible,"onUpdate:show":o[12]||(o[12]=e=>t(n).visible=e),position:"bottom","close-on-click-overlay":!1,onClosed:t(n).closed},{default:i(()=>[s(O,{description:"loading....",type:"circle",loading:t(n).loading},{default:i(()=>[t(n).url?(u(),p("div",Ye,[a("div",Me,[a("div",null,[d(" \u5BC6\u7801\uFF1A"),a("span",null,r(t(n).password),1),Re,d(" \u5230\u671F\u65F6\u95F4\uFF1A"),a("span",null,r(t(n).deadline==null?"\u6C38\u4E45":new Date(t(n).deadline).format("YYYY-MM-DD HH:mm:ss")),1)]),a("div",He,[s(t(Be),{class:"qrcode",value:t(n).url,options:{width:200}},null,8,["value"])]),s(x,{modelValue:t(n).url,"onUpdate:modelValue":o[5]||(o[5]=e=>t(n).url=e),textarea:"",readonly:"",placeholder:"\u5206\u4EAB\u94FE\u63A5",rows:2},{"append-icon":i(()=>[s(y,{style:{height:"100%","box-shadow":"none"},onClick:T},{default:i(()=>[s(b,{name:"fa-copy"}),d("\u590D\u5236 ")]),_:1})]),_:1},8,["modelValue"])]),a("div",Ne,[s(y,{type:"primary",onClick:o[6]||(o[6]=e=>t(n).visible=!1)},{default:i(()=>[d(" \u786E\u5B9A ")]),_:1})])])):(u(),p("div",qe,[a("div",Le,[Te,s(J,{modelValue:t(n).enablePwd,"onUpdate:modelValue":o[7]||(o[7]=e=>t(n).enablePwd=e),size:"25"},null,8,["modelValue"]),t(n).enablePwd?(u(),I(x,{key:0,modelValue:t(n).form.password,"onUpdate:modelValue":o[8]||(o[8]=e=>t(n).form.password=e),minlength:4,maxlength:4,style:{"margin-left":"20px"}},null,8,["modelValue"])):P("",!0)]),je,s(K,{modelValue:t(n).form.deadline,"onUpdate:modelValue":o[10]||(o[10]=e=>t(n).form.deadline=e),min:new Date().format("YYYY-MM-DD")},{year:i(()=>[a("div",We,[a("span",{onClick:o[9]||(o[9]=e=>t(n).form.deadline=null)},"\u6E05\u9664\u65E5\u671F")])]),date:i(({year:e,month:c})=>[a("span",null,r(e)+"\u5E74"+r(c)+"\u6708",1)]),_:1},8,["modelValue","min"]),a("div",Xe,[s(y,{style:{"margin-right":"10px"},onClick:o[11]||(o[11]=e=>t(n).visible=!1)},{default:i(()=>[d(" \u53D6\u6D88 ")]),_:1}),s(y,{type:"primary",onClick:t(Ae)},{default:i(()=>[d(" \u5206\u4EAB ")]),_:1},8,["onClick"])])]))]),_:1},8,["loading"])]),_:1},8,["show","onClosed"])])}}});const lo=Ve(Ge,[["__scopeId","data-v-6694c3cd"]]);export{lo as default};
