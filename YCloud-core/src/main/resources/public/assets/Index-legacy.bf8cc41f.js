System.register(["./index-legacy.dff47cd5.js","./common-legacy.8fe8353e.js","./_plugin-vue_export-helper-legacy.649209c3.js","./DataTable-legacy.11354e6f.js","./Icon-legacy.f717df39.js","./Tooltip-legacy.35a3b83e.js","./Input-legacy.44f22ebb.js","./use-locale-legacy.d832f75e.js","./Empty-legacy.9c862b95.js"],(function(e,t){"use strict";var a,n,l,i,s,u,d,r,o,c,p,f,y,v,h,m,g,w,k,x,b,j,_,I,T,B,z,L,$,C=document.createElement("style");return C.innerHTML=".password-page[data-v-7d814993]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.pwd-input[data-v-7d814993]{width:200px;display:flex;justify-content:space-between;margin-bottom:10px}.pwd-input input[data-v-7d814993]{text-align:center;width:40px}.share-page[data-v-2f957dfc]{width:100%;height:100%}.share-page .share-header[data-v-2f957dfc]{height:100px;display:flex;flex-direction:column-reverse}.share-page .resource-list[data-v-2f957dfc]{height:calc(100% - 100px)}[data-v-2f957dfc] .fileLink{cursor:pointer}[data-v-2f957dfc] .fileLink:hover{text-decoration:underline}[data-v-2f957dfc] .fileIcon{margin-right:5px}\n",document.head.appendChild(C),{setters:[e=>{a=e.r,n=e.Y,l=e.n,i=e.o,s=e.c,u=e.a,d=e.a5,r=e.bT,o=e.aA,c=e.c5,p=e.f,f=e.bP,y=e.b,v=e.w,h=e.e,m=e._,g=e.bQ,w=e.bR,k=e.t,x=e.u,b=e.ap,j=e.at,_=e.s},e=>{I=e.A,T=e.s,B=e.F,z=e.f},e=>{L=e._},e=>{$=e.i},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const t={class:"password-page"},C=["onUpdate:modelValue","onInput"],E=["onKeypress"],F=L({__name:"PassInput",props:{num:{type:Number,validator:e=>"number"==typeof e&&e>=4,default:4},id:String,pass:Function,passOk:Function},setup(e){const g=e,w=a([]),k=a(null);n((()=>{l((()=>{x=k.value.children;for(let e of x)e.onchange=({target:e})=>{/^[a-zA-Z0-9]$/.test(e.value)||(e.value="")};x[0].focus()}))}));let x=[];const b=function(e,t){if("deleteContentBackward"===t.inputType&&0!=e)x[e-1].focus();else if("insertText"===t.inputType&&e!=g.num-1)x[e+1].focus();else if("insertFromPaste"===t.inputType)if(0==e){let e=t.target.value;if(e.length>=g.num){for(let t=0;t<4;t++)w.value[t]=e[t];t.target.blur()}else t.target.value=""}else w.value[e]=""},j=function(){w.value.join("").length<g.num?window.$message.warning("请输入完整的密码"):function(e){if(!g.pass)return I.pass(g.id,e).then((e=>{w.value.length=0})).then((e=>{g.passOk()})).catch((e=>{w.value=[]}));g.pass(e)}(w.value.join(""))};return(e,a)=>{const n=m;return i(),s("div",t,[u("div",{class:"pwd-input",ref_key:"pwdInputs",ref:k,style:f({width:50*g.num+"px"})},[(i(!0),s(d,null,r(new Array(g.num-1),((e,t)=>o((i(),s("input",{class:"y-input","onUpdate:modelValue":e=>w.value[t]=e,onInput:e=>b(t,e)},null,40,C)),[[c,w.value[t]]]))),256)),o(u("input",{class:"y-input","onUpdate:modelValue":a[0]||(a[0]=e=>w.value[g.num-1]=e),onInput:a[1]||(a[1]=e=>b(g.num-1,e)),onKeypress:p(j,["enter"])},null,40,E),[[c,w.value[g.num-1]]])],4),y(n,{style:f({width:50*g.num+"px"}),type:"success",onClick:j},{default:v((()=>[h("确认")])),_:1},8,["style"])])}}},[["__scopeId","data-v-7d814993"]]),K={key:0,class:"share-page"},P={style:{width:"960px",margin:"auto"}},A={class:"share-header"},M={class:"resource-list"};e("default",L({__name:"Index",setup(e){const t=g(),l=a(t.params.id),d=a(null),r=a([]),o=a(!1);n((()=>{window.$loadingBar.start(),c().then((()=>window.$loadingBar.finish())).catch((()=>window.$loadingBar.error())),setTimeout((()=>{window.$loadingBar.finish()}),3e3)}));const c=function(e){return null===T().token?(o.value=!0,Promise.resolve(1)):I.getShareList(l.value,e).then((e=>{d.value=e,console.log(d.value)}))},p=function(e){const t=r.value;-1==e?r.value=[]:"number"==typeof e?r.value.splice(e+1,r.value.length-e-1):"string"==typeof e&&r.value.push(e),e=r.value.join("/"),c(e).catch((()=>{r.value=t}))},f=a([]),v=function(e){f.value=e},h=w([{type:"selection",disabled:e=>"Edward King 3"===e.id},{title:"文件名",key:"name",render:e=>_("a",{class:"fileLink",style:{color:"dir"===e.type?"#E67E22":"#03885B"},onClick:t=>{t.stopPropagation(),"dir"===e.type&&p(e.name)}},[z(e.type),e.name])},{title:"修改日期",key:"updateTime",width:"170",render:e=>"dir"==e.type?"-":new Date(e.updateTime).format("yyyy/MM/dd HH:mm")},{title:"类型",key:"type",width:"100",render:e=>!0===e.dir?"-":e.type},{title:"大小",key:"size",width:"100",render:e=>{const t=1048576;return"dir"===e.type?"-":e.size>t?(e.size/t).toFixed(2)+"MB":parseInt(e.size/1024)+"KB"}},{title:"操作",key:null,width:"100",render:e=>"dir"!==e.type?_(m,{size:"tiny",type:"info",tertiary:!0,onClick:()=>I.download(e.id,r.value.join("/"))},{default:()=>"下载"}):null}]);return(e,t)=>{const a=$;return null!==d.value?(i(),s("div",K,[u("div",P,[u("div",A,[u("span",null,"过期时间："+k(d.value.deadline?new Date(d.value.deadline):"永久"),1)]),u("div",M,[y(B,{name:"Share",path:r.value,clickBread:p},null,8,["path"]),y(a,{bordered:!1,"row-key":e=>e.id?e.id:e.name,columns:x(h),data:d.value.resourceList,"onUpdate:checkedRowKeys":v},null,8,["row-key","columns","data"])])])])):o.value?(i(),b(F,{key:1,id:l.value,"pass-ok":()=>c()},null,8,["id","pass-ok"])):j("",!0)}}},[["__scopeId","data-v-2f957dfc"]]))}}}));
